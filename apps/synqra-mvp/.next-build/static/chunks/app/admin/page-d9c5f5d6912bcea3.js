(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{5835:(e,a,s)=>{Promise.resolve().then(s.bind(s,7274))},7274:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>i});var t=s(4568),l=s(7620),r=s(5770),n=s.n(r);function i(){let[e,a]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0),[i,d]=(0,l.useState)(""),[c,o]=(0,l.useState)(!1),m=async()=>{if(i)try{let e=await fetch("/api/approve?adminToken=".concat(i)),s=await e.json();s.ok?(a(s.jobs),o(!0)):alert("Invalid admin token")}catch(e){console.error("Failed to load jobs:",e)}finally{r(!1)}},x=async(e,a)=>{if(confirm("Approve and publish to ".concat(a.join(", "),"?")))try{let s=await fetch("/api/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobId:e,platforms:a,adminToken:i})}),t=await s.json();t.ok?(alert(t.message),m()):alert("Error: ".concat(t.error))}catch(e){alert("Failed to approve job")}};return c?(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Synqra Admin Dashboard"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(n(),{href:"/admin/integrations",className:"bg-gray-800 hover:bg-gray-700 px-6 py-2 rounded-lg",children:"Integrations"}),(0,t.jsx)("button",{onClick:()=>o(!1),className:"bg-red-600 hover:bg-red-700 px-6 py-2 rounded-lg",children:"Logout"})]})]}),s?(0,t.jsx)("div",{className:"text-center py-20",children:"Loading..."}):0===e.length?(0,t.jsx)("div",{className:"text-center py-20 text-gray-400",children:"No pending jobs"}):(0,t.jsx)("div",{className:"grid gap-6",children:e.map(e=>{var a;return(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-2",children:e.brief}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:["Created: ",new Date(e.created_at).toLocaleString()]}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:["Status: ",e.status]})]})}),(0,t.jsx)("div",{className:"grid gap-4 mb-4",children:null===(a=e.variants)||void 0===a?void 0:a.map(e=>(0,t.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,t.jsx)("span",{className:"font-medium text-blue-400",children:e.platform})}),(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap mb-2",children:e.content}),e.media_url&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("img",{src:e.media_url,alt:"Media",className:"max-w-xs rounded"})})]},e.id))}),(0,t.jsx)("button",{onClick:()=>{var a;return x(e.id,(null===(a=e.variants)||void 0===a?void 0:a.map(e=>e.platform))||[])},className:"bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg font-medium",children:"Approve & Publish All Platforms"})]},e.id)})})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto mt-20",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Synqra Admin"}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Admin Token"}),(0,t.jsx)("input",{type:"password",value:i,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded-lg mb-4",placeholder:"Enter admin token"}),(0,t.jsx)("button",{onClick:m,className:"w-full bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-medium",children:"Login"})]})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[5770,587,2855,7358],()=>a(5835)),_N_E=e.O()}]);