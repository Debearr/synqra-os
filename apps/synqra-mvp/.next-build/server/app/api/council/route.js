/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/council/route";
exports.ids = ["app/api/council/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcouncil%2Froute&page=%2Fapi%2Fcouncil%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcouncil%2Froute.ts&appDir=C%3A%5CProjects%5CSynqra%5Capps%5Csynqra-mvp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CProjects%5CSynqra%5Capps%5Csynqra-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcouncil%2Froute&page=%2Fapi%2Fcouncil%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcouncil%2Froute.ts&appDir=C%3A%5CProjects%5CSynqra%5Capps%5Csynqra-mvp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CProjects%5CSynqra%5Capps%5Csynqra-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/../../node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Projects_Synqra_apps_synqra_mvp_app_api_council_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/council/route.ts */ \"(rsc)/./app/api/council/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/council/route\",\n        pathname: \"/api/council\",\n        filename: \"route\",\n        bundlePath: \"app/api/council/route\"\n    },\n    resolvedPagePath: \"C:\\\\Projects\\\\Synqra\\\\apps\\\\synqra-mvp\\\\app\\\\api\\\\council\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Projects_Synqra_apps_synqra_mvp_app_api_council_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyL2luZGV4LmpzP25hbWU9YXBwJTJGYXBpJTJGY291bmNpbCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY291bmNpbCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNvdW5jaWwlMkZyb3V0ZS50cyZhcHBEaXI9QyUzQSU1Q1Byb2plY3RzJTVDU3lucXJhJTVDYXBwcyU1Q3N5bnFyYS1tdnAlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNQcm9qZWN0cyU1Q1N5bnFyYSU1Q2FwcHMlNUNzeW5xcmEtbXZwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PXN0YW5kYWxvbmUmcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDbUI7QUFDaEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFByb2plY3RzXFxcXFN5bnFyYVxcXFxhcHBzXFxcXHN5bnFyYS1tdnBcXFxcYXBwXFxcXGFwaVxcXFxjb3VuY2lsXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcInN0YW5kYWxvbmVcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY291bmNpbC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NvdW5jaWxcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NvdW5jaWwvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxQcm9qZWN0c1xcXFxTeW5xcmFcXFxcYXBwc1xcXFxzeW5xcmEtbXZwXFxcXGFwcFxcXFxhcGlcXFxcY291bmNpbFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcouncil%2Froute&page=%2Fapi%2Fcouncil%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcouncil%2Froute.ts&appDir=C%3A%5CProjects%5CSynqra%5Capps%5Csynqra-mvp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CProjects%5CSynqra%5Capps%5Csynqra-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**********************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**********************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**********************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**********************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/council/route.ts":
/*!**********************************!*\
  !*** ./app/api/council/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/next/dist/api/server.js\");\n/* harmony import */ var _src_lib_aiCouncil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/lib/aiCouncil */ \"(rsc)/./src/lib/aiCouncil.ts\");\n/* harmony import */ var _lib_security_gatekeeper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/security/gatekeeper */ \"(rsc)/./lib/security/gatekeeper.ts\");\n/* harmony import */ var _src_lib_aiCouncil_logging__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/lib/aiCouncil/logging */ \"(rsc)/./src/lib/aiCouncil/logging.ts\");\n\n\n\n\n/**\r\n * ============================================================\r\n * AI COUNCIL API ENDPOINT\r\n * ============================================================\r\n * POST /api/council\r\n * Production-grade multi-model intelligence endpoint\r\n * \r\n * Features:\r\n * - Rate limiting and security\r\n * - Cost tracking\r\n * - Individual model responses + consensus\r\n * - Error handling with graceful degradation\r\n */ async function POST(request) {\n    const startTime = Date.now();\n    let requestId;\n    try {\n        const body = await request.json();\n        // Validate input\n        if (!body.prompt || typeof body.prompt !== \"string\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid request\",\n                message: \"The 'prompt' field is required and must be a string\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate prompt length\n        const promptLength = body.prompt.trim().length;\n        if (promptLength === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid request\",\n                message: \"Prompt cannot be empty\"\n            }, {\n                status: 400\n            });\n        }\n        if (promptLength > 10000) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid request\",\n                message: \"Prompt exceeds maximum length of 10,000 characters\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate members if provided\n        if (body.members) {\n            if (!Array.isArray(body.members) || body.members.length === 0) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid request\",\n                    message: \"Members must be a non-empty array\"\n                }, {\n                    status: 400\n                });\n            }\n            if (body.members.length > 10) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid request\",\n                    message: \"Maximum 10 council members allowed\"\n                }, {\n                    status: 400\n                });\n            }\n            for (const member of body.members){\n                if (!member.model || !member.name || !member.role) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        error: \"Invalid request\",\n                        message: \"Each member must have 'model', 'name', and 'role' fields\"\n                    }, {\n                        status: 400\n                    });\n                }\n            }\n        }\n        // Validate temperature if provided\n        if (body.temperature !== undefined) {\n            if (typeof body.temperature !== \"number\" || body.temperature < 0 || body.temperature > 2) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid request\",\n                    message: \"Temperature must be a number between 0 and 2\"\n                }, {\n                    status: 400\n                });\n            }\n        }\n        // Validate maxTokens if provided\n        if (body.maxTokens !== undefined) {\n            if (typeof body.maxTokens !== \"number\" || body.maxTokens < 1 || body.maxTokens > 8000) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid request\",\n                    message: \"maxTokens must be a number between 1 and 8000\"\n                }, {\n                    status: 400\n                });\n            }\n        }\n        // Security and rate limiting\n        const tierHeader = (request.headers.get(\"x-synqra-tier\") || \"\").toLowerCase();\n        const tier = tierHeader === \"premium\" || tierHeader === \"enterprise\" ? tierHeader : \"free\";\n        const fingerprint = request.headers.get(\"x-synqra-fp\");\n        const ip = request.headers.get(\"x-forwarded-for\")?.split(\",\")[0]?.trim() || request.headers.get(\"x-real-ip\") || null;\n        const userAgent = request.headers.get(\"user-agent\");\n        const authHeader = request.headers.get(\"authorization\");\n        const effectiveTier = authHeader ? \"premium\" : tier;\n        // Apply security (skip for premium/enterprise)\n        if (effectiveTier === \"free\") {\n            try {\n                (0,_lib_security_gatekeeper__WEBPACK_IMPORTED_MODULE_2__.enforceSynqraLiteDraftSecurity)({\n                    tier: effectiveTier,\n                    fingerprint: fingerprint || null,\n                    email: request.headers.get(\"x-synqra-email\") || null,\n                    ip,\n                    userAgent\n                });\n            } catch (securityError) {\n                if (securityError instanceof _lib_security_gatekeeper__WEBPACK_IMPORTED_MODULE_2__.PublicGatekeeperError) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        error: \"Rate limit exceeded\",\n                        message: securityError.message\n                    }, {\n                        status: securityError.status\n                    });\n                }\n                throw securityError;\n            }\n        }\n        // Generate request ID for tracking\n        requestId = `council_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n        // Extract user metadata from auth header for context injection\n        let enhancedSystemPrompt = body.systemPrompt;\n        if (authHeader) {\n            try {\n                const { createClient } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@supabase\"), __webpack_require__.e(\"vendor-chunks/tslib\"), __webpack_require__.e(\"vendor-chunks/iceberg-js\")]).then(__webpack_require__.bind(__webpack_require__, /*! @supabase/supabase-js */ \"(rsc)/../../node_modules/@supabase/supabase-js/dist/index.mjs\"));\n                const { getSupabaseUrl, getSupabaseAnonKey } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_supabase_env_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/lib/supabase/env */ \"(rsc)/./lib/supabase/env.ts\"));\n                const supabase = createClient(getSupabaseUrl(), getSupabaseAnonKey(), {\n                    global: {\n                        headers: {\n                            Authorization: authHeader\n                        }\n                    }\n                });\n                const { data: { user } } = await supabase.auth.getUser();\n                if (user?.user_metadata) {\n                    const { industry, role, goal } = user.user_metadata;\n                    if (industry || role || goal) {\n                        const contextLine = `You are advising a ${role || \"professional\"} in the ${industry || \"business\"} sector. Prioritize guidance aligned with ${goal || \"their objectives\"}.`;\n                        enhancedSystemPrompt = enhancedSystemPrompt ? `${enhancedSystemPrompt}\\n\\n${contextLine}` : contextLine;\n                    }\n                }\n            } catch (error) {\n                // Silently fail - user metadata injection is optional\n                console.warn(\"Failed to inject user metadata:\", error);\n            }\n        }\n        // Query the council\n        const result = await (0,_src_lib_aiCouncil__WEBPACK_IMPORTED_MODULE_1__.queryCouncil)({\n            prompt: body.prompt.trim(),\n            systemPrompt: enhancedSystemPrompt,\n            members: body.members,\n            temperature: body.temperature,\n            maxTokens: body.maxTokens\n        });\n        // Calculate total tokens and cost\n        const totalTokens = result.responses.reduce((sum, r)=>sum + (r.tokens?.total || 0), 0);\n        const totalPromptTokens = result.responses.reduce((sum, r)=>sum + (r.tokens?.prompt || 0), 0);\n        const totalCompletionTokens = result.responses.reduce((sum, r)=>sum + (r.tokens?.completion || 0), 0);\n        const duration = Date.now() - startTime;\n        // Log usage for cost tracking\n        await (0,_src_lib_aiCouncil_logging__WEBPACK_IMPORTED_MODULE_3__.logCouncilUsage)({\n            requestId,\n            prompt: body.prompt.trim(),\n            responses: result.responses,\n            totalTokens,\n            totalPromptTokens,\n            totalCompletionTokens,\n            duration,\n            tier: effectiveTier\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ...result,\n            metadata: {\n                requestId,\n                totalTokens,\n                totalPromptTokens,\n                totalCompletionTokens,\n                duration,\n                tier: effectiveTier\n            }\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"AI Council API error:\", error);\n        // Log error\n        if (requestId) {\n            await (0,_src_lib_aiCouncil_logging__WEBPACK_IMPORTED_MODULE_3__.logCouncilUsage)({\n                requestId,\n                prompt: \"\",\n                responses: [],\n                totalTokens: 0,\n                totalPromptTokens: 0,\n                totalCompletionTokens: 0,\n                duration: Date.now() - startTime,\n                error: error instanceof Error ? error.message : \"Unknown error\"\n            }).catch(()=>{});\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Council query failed\",\n            message: error instanceof Error ? error.message : \"Unknown error\",\n            requestId\n        }, {\n            status: 500\n        });\n    }\n}\n/**\r\n * GET /api/council\r\n * Returns information about the council endpoint and available members\r\n */ async function GET() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        endpoint: \"/api/council\",\n        method: \"POST\",\n        description: \"Query multiple AI models for diverse perspectives\",\n        defaultMembers: _src_lib_aiCouncil__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_COUNCIL_MEMBERS.map((m)=>({\n                name: m.name,\n                role: m.role,\n                model: m.model\n            })),\n        requestSchema: {\n            prompt: \"string (required) - The question or prompt for the council\",\n            systemPrompt: \"string (optional) - Custom system prompt\",\n            members: \"array (optional) - Custom council members\",\n            temperature: \"number (optional) - Temperature for responses (0-1)\",\n            maxTokens: \"number (optional) - Maximum tokens per response\"\n        },\n        example: {\n            prompt: \"What are the key considerations for building a scalable SaaS product?\",\n            temperature: 0.7\n        }\n    });\n}\n/**\r\n * Handle unsupported methods\r\n */ async function PUT() {\n    return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Method Not Allowed\", {\n        status: 405,\n        headers: {\n            Allow: \"GET, POST\"\n        }\n    });\n}\nasync function DELETE() {\n    return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Method Not Allowed\", {\n        status: 405,\n        headers: {\n            Allow: \"GET, POST\"\n        }\n    });\n}\nasync function PATCH() {\n    return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Method Not Allowed\", {\n        status: 405,\n        headers: {\n            Allow: \"GET, POST\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cGlcXGNvdW5jaWxcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgcXVlcnlDb3VuY2lsLCBxdWVyeU1lbWJlciwgREVGQVVMVF9DT1VOQ0lMX01FTUJFUlMgfSBmcm9tIFwiQC9zcmMvbGliL2FpQ291bmNpbFwiO1xyXG5pbXBvcnQgdHlwZSB7IENvdW5jaWxSZXF1ZXN0LCBDb3VuY2lsTWVtYmVyIH0gZnJvbSBcIkAvc3JjL2xpYi9haUNvdW5jaWxcIjtcclxuaW1wb3J0IHsgZW5mb3JjZVN5bnFyYUxpdGVEcmFmdFNlY3VyaXR5LCBQdWJsaWNHYXRla2VlcGVyRXJyb3IsIHR5cGUgU3lucXJhVGllciB9IGZyb20gXCJAL2xpYi9zZWN1cml0eS9nYXRla2VlcGVyXCI7XHJcbmltcG9ydCB7IGxvZ0NvdW5jaWxVc2FnZSB9IGZyb20gXCJAL3NyYy9saWIvYWlDb3VuY2lsL2xvZ2dpbmdcIjtcclxuXHJcbi8qKlxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogQUkgQ09VTkNJTCBBUEkgRU5EUE9JTlRcclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqIFBPU1QgL2FwaS9jb3VuY2lsXHJcbiAqIFByb2R1Y3Rpb24tZ3JhZGUgbXVsdGktbW9kZWwgaW50ZWxsaWdlbmNlIGVuZHBvaW50XHJcbiAqIFxyXG4gKiBGZWF0dXJlczpcclxuICogLSBSYXRlIGxpbWl0aW5nIGFuZCBzZWN1cml0eVxyXG4gKiAtIENvc3QgdHJhY2tpbmdcclxuICogLSBJbmRpdmlkdWFsIG1vZGVsIHJlc3BvbnNlcyArIGNvbnNlbnN1c1xyXG4gKiAtIEVycm9yIGhhbmRsaW5nIHdpdGggZ3JhY2VmdWwgZGVncmFkYXRpb25cclxuICovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgbGV0IHJlcXVlc3RJZDogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keTogQ291bmNpbFJlcXVlc3QgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBpbnB1dFxyXG4gICAgaWYgKCFib2R5LnByb21wdCB8fCB0eXBlb2YgYm9keS5wcm9tcHQgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVycm9yOiBcIkludmFsaWQgcmVxdWVzdFwiLFxyXG4gICAgICAgICAgbWVzc2FnZTogXCJUaGUgJ3Byb21wdCcgZmllbGQgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBzdHJpbmdcIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIHByb21wdCBsZW5ndGhcclxuICAgIGNvbnN0IHByb21wdExlbmd0aCA9IGJvZHkucHJvbXB0LnRyaW0oKS5sZW5ndGg7XHJcbiAgICBpZiAocHJvbXB0TGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlcnJvcjogXCJJbnZhbGlkIHJlcXVlc3RcIixcclxuICAgICAgICAgIG1lc3NhZ2U6IFwiUHJvbXB0IGNhbm5vdCBiZSBlbXB0eVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHByb21wdExlbmd0aCA+IDEwMDAwKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlcnJvcjogXCJJbnZhbGlkIHJlcXVlc3RcIixcclxuICAgICAgICAgIG1lc3NhZ2U6IFwiUHJvbXB0IGV4Y2VlZHMgbWF4aW11bSBsZW5ndGggb2YgMTAsMDAwIGNoYXJhY3RlcnNcIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIG1lbWJlcnMgaWYgcHJvdmlkZWRcclxuICAgIGlmIChib2R5Lm1lbWJlcnMpIHtcclxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGJvZHkubWVtYmVycykgfHwgYm9keS5tZW1iZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZXJyb3I6IFwiSW52YWxpZCByZXF1ZXN0XCIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTWVtYmVycyBtdXN0IGJlIGEgbm9uLWVtcHR5IGFycmF5XCIsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGJvZHkubWVtYmVycy5sZW5ndGggPiAxMCkge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZXJyb3I6IFwiSW52YWxpZCByZXF1ZXN0XCIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTWF4aW11bSAxMCBjb3VuY2lsIG1lbWJlcnMgYWxsb3dlZFwiLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAoY29uc3QgbWVtYmVyIG9mIGJvZHkubWVtYmVycykge1xyXG4gICAgICAgIGlmICghbWVtYmVyLm1vZGVsIHx8ICFtZW1iZXIubmFtZSB8fCAhbWVtYmVyLnJvbGUpIHtcclxuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGVycm9yOiBcIkludmFsaWQgcmVxdWVzdFwiLFxyXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRWFjaCBtZW1iZXIgbXVzdCBoYXZlICdtb2RlbCcsICduYW1lJywgYW5kICdyb2xlJyBmaWVsZHNcIixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIHRlbXBlcmF0dXJlIGlmIHByb3ZpZGVkXHJcbiAgICBpZiAoYm9keS50ZW1wZXJhdHVyZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgYm9keS50ZW1wZXJhdHVyZSAhPT0gXCJudW1iZXJcIiB8fCBib2R5LnRlbXBlcmF0dXJlIDwgMCB8fCBib2R5LnRlbXBlcmF0dXJlID4gMikge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZXJyb3I6IFwiSW52YWxpZCByZXF1ZXN0XCIsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGVtcGVyYXR1cmUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDJcIixcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgbWF4VG9rZW5zIGlmIHByb3ZpZGVkXHJcbiAgICBpZiAoYm9keS5tYXhUb2tlbnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBpZiAodHlwZW9mIGJvZHkubWF4VG9rZW5zICE9PSBcIm51bWJlclwiIHx8IGJvZHkubWF4VG9rZW5zIDwgMSB8fCBib2R5Lm1heFRva2VucyA+IDgwMDApIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGVycm9yOiBcIkludmFsaWQgcmVxdWVzdFwiLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIm1heFRva2VucyBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gMSBhbmQgODAwMFwiLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTZWN1cml0eSBhbmQgcmF0ZSBsaW1pdGluZ1xyXG4gICAgY29uc3QgdGllckhlYWRlciA9IChyZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC1zeW5xcmEtdGllclwiKSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgY29uc3QgdGllcjogU3lucXJhVGllciA9XHJcbiAgICAgIHRpZXJIZWFkZXIgPT09IFwicHJlbWl1bVwiIHx8IHRpZXJIZWFkZXIgPT09IFwiZW50ZXJwcmlzZVwiID8gKHRpZXJIZWFkZXIgYXMgU3lucXJhVGllcikgOiBcImZyZWVcIjtcclxuICAgIGNvbnN0IGZpbmdlcnByaW50ID0gcmVxdWVzdC5oZWFkZXJzLmdldChcIngtc3lucXJhLWZwXCIpO1xyXG4gICAgY29uc3QgaXAgPVxyXG4gICAgICByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtZm9yXCIpPy5zcGxpdChcIixcIilbMF0/LnRyaW0oKSB8fFxyXG4gICAgICByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC1yZWFsLWlwXCIpIHx8XHJcbiAgICAgIG51bGw7XHJcbiAgICBjb25zdCB1c2VyQWdlbnQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwidXNlci1hZ2VudFwiKTtcclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiYXV0aG9yaXphdGlvblwiKTtcclxuICAgIGNvbnN0IGVmZmVjdGl2ZVRpZXI6IFN5bnFyYVRpZXIgPSBhdXRoSGVhZGVyID8gXCJwcmVtaXVtXCIgOiB0aWVyO1xyXG5cclxuICAgIC8vIEFwcGx5IHNlY3VyaXR5IChza2lwIGZvciBwcmVtaXVtL2VudGVycHJpc2UpXHJcbiAgICBpZiAoZWZmZWN0aXZlVGllciA9PT0gXCJmcmVlXCIpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBlbmZvcmNlU3lucXJhTGl0ZURyYWZ0U2VjdXJpdHkoe1xyXG4gICAgICAgICAgdGllcjogZWZmZWN0aXZlVGllcixcclxuICAgICAgICAgIGZpbmdlcnByaW50OiBmaW5nZXJwcmludCB8fCBudWxsLFxyXG4gICAgICAgICAgZW1haWw6IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJ4LXN5bnFyYS1lbWFpbFwiKSB8fCBudWxsLFxyXG4gICAgICAgICAgaXAsXHJcbiAgICAgICAgICB1c2VyQWdlbnQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gY2F0Y2ggKHNlY3VyaXR5RXJyb3IpIHtcclxuICAgICAgICBpZiAoc2VjdXJpdHlFcnJvciBpbnN0YW5jZW9mIFB1YmxpY0dhdGVrZWVwZXJFcnJvcikge1xyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZXJyb3I6IFwiUmF0ZSBsaW1pdCBleGNlZWRlZFwiLFxyXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IHNlY3VyaXR5RXJyb3IubWVzc2FnZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgeyBzdGF0dXM6IHNlY3VyaXR5RXJyb3Iuc3RhdHVzIH1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IHNlY3VyaXR5RXJyb3I7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBHZW5lcmF0ZSByZXF1ZXN0IElEIGZvciB0cmFja2luZ1xyXG4gICAgcmVxdWVzdElkID0gYGNvdW5jaWxfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KX1gO1xyXG5cclxuICAgIC8vIEV4dHJhY3QgdXNlciBtZXRhZGF0YSBmcm9tIGF1dGggaGVhZGVyIGZvciBjb250ZXh0IGluamVjdGlvblxyXG4gICAgbGV0IGVuaGFuY2VkU3lzdGVtUHJvbXB0ID0gYm9keS5zeXN0ZW1Qcm9tcHQ7XHJcbiAgICBpZiAoYXV0aEhlYWRlcikge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoXCJAc3VwYWJhc2Uvc3VwYWJhc2UtanNcIik7XHJcbiAgICAgICAgY29uc3QgeyBnZXRTdXBhYmFzZVVybCwgZ2V0U3VwYWJhc2VBbm9uS2V5IH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9zdXBhYmFzZS9lbnZcIik7XHJcbiAgICAgICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoZ2V0U3VwYWJhc2VVcmwoKSwgZ2V0U3VwYWJhc2VBbm9uS2V5KCksIHtcclxuICAgICAgICAgIGdsb2JhbDoge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYXV0aEhlYWRlcixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgIGRhdGE6IHsgdXNlciB9LFxyXG4gICAgICAgIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKHVzZXI/LnVzZXJfbWV0YWRhdGEpIHtcclxuICAgICAgICAgIGNvbnN0IHsgaW5kdXN0cnksIHJvbGUsIGdvYWwgfSA9IHVzZXIudXNlcl9tZXRhZGF0YTtcclxuICAgICAgICAgIGlmIChpbmR1c3RyeSB8fCByb2xlIHx8IGdvYWwpIHtcclxuICAgICAgICAgICAgY29uc3QgY29udGV4dExpbmUgPSBgWW91IGFyZSBhZHZpc2luZyBhICR7cm9sZSB8fCBcInByb2Zlc3Npb25hbFwifSBpbiB0aGUgJHtpbmR1c3RyeSB8fCBcImJ1c2luZXNzXCJ9IHNlY3Rvci4gUHJpb3JpdGl6ZSBndWlkYW5jZSBhbGlnbmVkIHdpdGggJHtnb2FsIHx8IFwidGhlaXIgb2JqZWN0aXZlc1wifS5gO1xyXG4gICAgICAgICAgICBlbmhhbmNlZFN5c3RlbVByb21wdCA9IGVuaGFuY2VkU3lzdGVtUHJvbXB0XHJcbiAgICAgICAgICAgICAgPyBgJHtlbmhhbmNlZFN5c3RlbVByb21wdH1cXG5cXG4ke2NvbnRleHRMaW5lfWBcclxuICAgICAgICAgICAgICA6IGNvbnRleHRMaW5lO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAvLyBTaWxlbnRseSBmYWlsIC0gdXNlciBtZXRhZGF0YSBpbmplY3Rpb24gaXMgb3B0aW9uYWxcclxuICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW5qZWN0IHVzZXIgbWV0YWRhdGE6XCIsIGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFF1ZXJ5IHRoZSBjb3VuY2lsXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeUNvdW5jaWwoe1xyXG4gICAgICBwcm9tcHQ6IGJvZHkucHJvbXB0LnRyaW0oKSxcclxuICAgICAgc3lzdGVtUHJvbXB0OiBlbmhhbmNlZFN5c3RlbVByb21wdCxcclxuICAgICAgbWVtYmVyczogYm9keS5tZW1iZXJzLFxyXG4gICAgICB0ZW1wZXJhdHVyZTogYm9keS50ZW1wZXJhdHVyZSxcclxuICAgICAgbWF4VG9rZW5zOiBib2R5Lm1heFRva2VucyxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbCB0b2tlbnMgYW5kIGNvc3RcclxuICAgIGNvbnN0IHRvdGFsVG9rZW5zID0gcmVzdWx0LnJlc3BvbnNlcy5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgKHIudG9rZW5zPy50b3RhbCB8fCAwKSwgMCk7XHJcbiAgICBjb25zdCB0b3RhbFByb21wdFRva2VucyA9IHJlc3VsdC5yZXNwb25zZXMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIChyLnRva2Vucz8ucHJvbXB0IHx8IDApLCAwKTtcclxuICAgIGNvbnN0IHRvdGFsQ29tcGxldGlvblRva2VucyA9IHJlc3VsdC5yZXNwb25zZXMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIChyLnRva2Vucz8uY29tcGxldGlvbiB8fCAwKSwgMCk7XHJcbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XHJcblxyXG4gICAgLy8gTG9nIHVzYWdlIGZvciBjb3N0IHRyYWNraW5nXHJcbiAgICBhd2FpdCBsb2dDb3VuY2lsVXNhZ2Uoe1xyXG4gICAgICByZXF1ZXN0SWQsXHJcbiAgICAgIHByb21wdDogYm9keS5wcm9tcHQudHJpbSgpLFxyXG4gICAgICByZXNwb25zZXM6IHJlc3VsdC5yZXNwb25zZXMsXHJcbiAgICAgIHRvdGFsVG9rZW5zLFxyXG4gICAgICB0b3RhbFByb21wdFRva2VucyxcclxuICAgICAgdG90YWxDb21wbGV0aW9uVG9rZW5zLFxyXG4gICAgICBkdXJhdGlvbixcclxuICAgICAgdGllcjogZWZmZWN0aXZlVGllcixcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAge1xyXG4gICAgICAgIC4uLnJlc3VsdCxcclxuICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgcmVxdWVzdElkLFxyXG4gICAgICAgICAgdG90YWxUb2tlbnMsXHJcbiAgICAgICAgICB0b3RhbFByb21wdFRva2VucyxcclxuICAgICAgICAgIHRvdGFsQ29tcGxldGlvblRva2VucyxcclxuICAgICAgICAgIGR1cmF0aW9uLFxyXG4gICAgICAgICAgdGllcjogZWZmZWN0aXZlVGllcixcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICB7IHN0YXR1czogMjAwIH1cclxuICAgICk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJBSSBDb3VuY2lsIEFQSSBlcnJvcjpcIiwgZXJyb3IpO1xyXG5cclxuICAgIC8vIExvZyBlcnJvclxyXG4gICAgaWYgKHJlcXVlc3RJZCkge1xyXG4gICAgICBhd2FpdCBsb2dDb3VuY2lsVXNhZ2Uoe1xyXG4gICAgICAgIHJlcXVlc3RJZCxcclxuICAgICAgICBwcm9tcHQ6IFwiXCIsXHJcbiAgICAgICAgcmVzcG9uc2VzOiBbXSxcclxuICAgICAgICB0b3RhbFRva2VuczogMCxcclxuICAgICAgICB0b3RhbFByb21wdFRva2VuczogMCxcclxuICAgICAgICB0b3RhbENvbXBsZXRpb25Ub2tlbnM6IDAsXHJcbiAgICAgICAgZHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWUsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIsXHJcbiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBlcnJvcjogXCJDb3VuY2lsIHF1ZXJ5IGZhaWxlZFwiLFxyXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIsXHJcbiAgICAgICAgcmVxdWVzdElkLFxyXG4gICAgICB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR0VUIC9hcGkvY291bmNpbFxyXG4gKiBSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjb3VuY2lsIGVuZHBvaW50IGFuZCBhdmFpbGFibGUgbWVtYmVyc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgZW5kcG9pbnQ6IFwiL2FwaS9jb3VuY2lsXCIsXHJcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgZGVzY3JpcHRpb246IFwiUXVlcnkgbXVsdGlwbGUgQUkgbW9kZWxzIGZvciBkaXZlcnNlIHBlcnNwZWN0aXZlc1wiLFxyXG4gICAgZGVmYXVsdE1lbWJlcnM6IERFRkFVTFRfQ09VTkNJTF9NRU1CRVJTLm1hcCgobSkgPT4gKHtcclxuICAgICAgbmFtZTogbS5uYW1lLFxyXG4gICAgICByb2xlOiBtLnJvbGUsXHJcbiAgICAgIG1vZGVsOiBtLm1vZGVsLFxyXG4gICAgfSkpLFxyXG4gICAgcmVxdWVzdFNjaGVtYToge1xyXG4gICAgICBwcm9tcHQ6IFwic3RyaW5nIChyZXF1aXJlZCkgLSBUaGUgcXVlc3Rpb24gb3IgcHJvbXB0IGZvciB0aGUgY291bmNpbFwiLFxyXG4gICAgICBzeXN0ZW1Qcm9tcHQ6IFwic3RyaW5nIChvcHRpb25hbCkgLSBDdXN0b20gc3lzdGVtIHByb21wdFwiLFxyXG4gICAgICBtZW1iZXJzOiBcImFycmF5IChvcHRpb25hbCkgLSBDdXN0b20gY291bmNpbCBtZW1iZXJzXCIsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiBcIm51bWJlciAob3B0aW9uYWwpIC0gVGVtcGVyYXR1cmUgZm9yIHJlc3BvbnNlcyAoMC0xKVwiLFxyXG4gICAgICBtYXhUb2tlbnM6IFwibnVtYmVyIChvcHRpb25hbCkgLSBNYXhpbXVtIHRva2VucyBwZXIgcmVzcG9uc2VcIixcclxuICAgIH0sXHJcbiAgICBleGFtcGxlOiB7XHJcbiAgICAgIHByb21wdDogXCJXaGF0IGFyZSB0aGUga2V5IGNvbnNpZGVyYXRpb25zIGZvciBidWlsZGluZyBhIHNjYWxhYmxlIFNhYVMgcHJvZHVjdD9cIixcclxuICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcclxuICAgIH0sXHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGUgdW5zdXBwb3J0ZWQgbWV0aG9kc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVCgpIHtcclxuICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcIk1ldGhvZCBOb3QgQWxsb3dlZFwiLCB7XHJcbiAgICBzdGF0dXM6IDQwNSxcclxuICAgIGhlYWRlcnM6IHsgQWxsb3c6IFwiR0VULCBQT1NUXCIgfSxcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURSgpIHtcclxuICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcIk1ldGhvZCBOb3QgQWxsb3dlZFwiLCB7XHJcbiAgICBzdGF0dXM6IDQwNSxcclxuICAgIGhlYWRlcnM6IHsgQWxsb3c6IFwiR0VULCBQT1NUXCIgfSxcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBBVENIKCkge1xyXG4gIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKFwiTWV0aG9kIE5vdCBBbGxvd2VkXCIsIHtcclxuICAgIHN0YXR1czogNDA1LFxyXG4gICAgaGVhZGVyczogeyBBbGxvdzogXCJHRVQsIFBPU1RcIiB9LFxyXG4gIH0pO1xyXG59XHJcblxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicXVlcnlDb3VuY2lsIiwiREVGQVVMVF9DT1VOQ0lMX01FTUJFUlMiLCJlbmZvcmNlU3lucXJhTGl0ZURyYWZ0U2VjdXJpdHkiLCJQdWJsaWNHYXRla2VlcGVyRXJyb3IiLCJsb2dDb3VuY2lsVXNhZ2UiLCJQT1NUIiwicmVxdWVzdCIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJyZXF1ZXN0SWQiLCJib2R5IiwianNvbiIsInByb21wdCIsImVycm9yIiwibWVzc2FnZSIsInN0YXR1cyIsInByb21wdExlbmd0aCIsInRyaW0iLCJsZW5ndGgiLCJtZW1iZXJzIiwiQXJyYXkiLCJpc0FycmF5IiwibWVtYmVyIiwibW9kZWwiLCJuYW1lIiwicm9sZSIsInRlbXBlcmF0dXJlIiwidW5kZWZpbmVkIiwibWF4VG9rZW5zIiwidGllckhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJ0b0xvd2VyQ2FzZSIsInRpZXIiLCJmaW5nZXJwcmludCIsImlwIiwic3BsaXQiLCJ1c2VyQWdlbnQiLCJhdXRoSGVhZGVyIiwiZWZmZWN0aXZlVGllciIsImVtYWlsIiwic2VjdXJpdHlFcnJvciIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImVuaGFuY2VkU3lzdGVtUHJvbXB0Iiwic3lzdGVtUHJvbXB0IiwiY3JlYXRlQ2xpZW50IiwiZ2V0U3VwYWJhc2VVcmwiLCJnZXRTdXBhYmFzZUFub25LZXkiLCJzdXBhYmFzZSIsImdsb2JhbCIsIkF1dGhvcml6YXRpb24iLCJkYXRhIiwidXNlciIsImF1dGgiLCJnZXRVc2VyIiwidXNlcl9tZXRhZGF0YSIsImluZHVzdHJ5IiwiZ29hbCIsImNvbnRleHRMaW5lIiwiY29uc29sZSIsIndhcm4iLCJyZXN1bHQiLCJ0b3RhbFRva2VucyIsInJlc3BvbnNlcyIsInJlZHVjZSIsInN1bSIsInIiLCJ0b2tlbnMiLCJ0b3RhbCIsInRvdGFsUHJvbXB0VG9rZW5zIiwidG90YWxDb21wbGV0aW9uVG9rZW5zIiwiY29tcGxldGlvbiIsImR1cmF0aW9uIiwibWV0YWRhdGEiLCJFcnJvciIsImNhdGNoIiwiR0VUIiwiZW5kcG9pbnQiLCJtZXRob2QiLCJkZXNjcmlwdGlvbiIsImRlZmF1bHRNZW1iZXJzIiwibWFwIiwibSIsInJlcXVlc3RTY2hlbWEiLCJleGFtcGxlIiwiUFVUIiwiQWxsb3ciLCJERUxFVEUiLCJQQVRDSCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/council/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/security/gatekeeper.ts":
/*!************************************!*\
  !*** ./lib/security/gatekeeper.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PublicGatekeeperError: () => (/* binding */ PublicGatekeeperError),\n/* harmony export */   enforceSynqraLiteDraftSecurity: () => (/* binding */ enforceSynqraLiteDraftSecurity)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var disposable_email_domains__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! disposable-email-domains */ \"(rsc)/../../node_modules/disposable-email-domains/index.json\");\n/* harmony import */ var _rateLimit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./rateLimit */ \"(rsc)/./lib/security/rateLimit.ts\");\n\n\n\nclass PublicGatekeeperError extends Error {\n    constructor(status, message){\n        super(message);\n        this.status = status;\n    }\n}\nfunction getGlobalFingerprintState() {\n    const g = globalThis;\n    if (!g.__synqraFingerprintState) {\n        g.__synqraFingerprintState = {\n            emailsByFingerprint: new Map()\n        };\n    }\n    return g.__synqraFingerprintState;\n}\nfunction stableHash(input) {\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash(\"sha256\").update(input).digest(\"hex\").slice(0, 32);\n}\nfunction normalizeEmail(email) {\n    return email.trim().toLowerCase();\n}\nfunction getEmailDomain(email) {\n    const at = email.lastIndexOf(\"@\");\n    return at === -1 ? \"\" : email.slice(at + 1).trim().toLowerCase();\n}\nfunction getKey(input) {\n    const fp = (input.fingerprint || \"\").trim();\n    if (fp) return `fp:${fp}`;\n    const ip = (input.ip || \"\").trim() || \"ip:unknown\";\n    const ua = (input.userAgent || \"\").trim() || \"ua:unknown\";\n    return `anon:${stableHash(`${ip}|${ua}`)}`;\n}\nfunction enforceDisposableEmail(email) {\n    const domain = getEmailDomain(email);\n    if (!domain) return;\n    if (disposable_email_domains__WEBPACK_IMPORTED_MODULE_1__.includes(domain)) {\n        throw new PublicGatekeeperError(403, \"Synqra Lite requires a non-disposable email. Please use a work email or upgrade to continue.\");\n    }\n}\nfunction enforceDeviceAccountLimits(fingerprint, email, nowMs) {\n    const state = getGlobalFingerprintState();\n    const key = fingerprint.trim();\n    if (!key) return;\n    const normalized = normalizeEmail(email);\n    const set = state.emailsByFingerprint.get(key) ?? new Set();\n    set.add(normalized);\n    state.emailsByFingerprint.set(key, set);\n    // Batch ban if 5+ accounts share fingerprint (do not disclose reason)\n    if (set.size >= 5) {\n        (0,_rateLimit__WEBPACK_IMPORTED_MODULE_2__.banKey)(`fp:${key}`, nowMs + 1000 * 60 * 60 * 24 * 7); // 7 days\n        throw new PublicGatekeeperError(403, \"Synqra Lite is unavailable on this device. Upgrade to continue.\");\n    }\n    // Max 2 accounts per device (do not disclose exact threshold)\n    if (set.size > 2) {\n        throw new PublicGatekeeperError(403, \"This device has reached the Synqra Lite account limit. Upgrade to continue.\");\n    }\n}\nfunction enforceRateLimits(key, nowMs) {\n    // Synqra Lite constraints (cost guardrails)\n    return (0,_rateLimit__WEBPACK_IMPORTED_MODULE_2__.rateLimitCheckAndIncrement)(key, nowMs, {\n        minIntervalMs: 30000,\n        dailyCap: 10\n    });\n}\nfunction enforceSynqraLiteDraftSecurity(input) {\n    const nowMs = typeof input.nowMs === \"number\" ? input.nowMs : Date.now();\n    const tier = input.tier;\n    // Premium tiers must not regress.\n    if (tier !== \"free\") {\n        return {\n            tier,\n            key: \"premium\"\n        };\n    }\n    const key = getKey(input);\n    if (input.email) {\n        enforceDisposableEmail(input.email);\n    }\n    if (input.fingerprint && input.email) {\n        enforceDeviceAccountLimits(input.fingerprint, input.email, nowMs);\n    }\n    const rl = enforceRateLimits(key, nowMs);\n    if (!rl.ok) {\n        if (rl.kind === \"too_fast\") {\n            throw new PublicGatekeeperError(429, \"Synqra Lite allows one generation every 30 seconds. Please wait a moment or upgrade for faster access.\");\n        }\n        if (rl.kind === \"daily_cap\") {\n            throw new PublicGatekeeperError(429, \"Youve reached todays Synqra Lite limit (10 generations). Upgrade to continue.\");\n        }\n        throw new PublicGatekeeperError(403, \"Synqra Lite is temporarily unavailable. Upgrade to continue.\");\n    }\n    return {\n        tier,\n        key,\n        remainingToday: rl.remainingToday\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bkUsTUFBTXNCLFFBQVEsT0FBT3RCLE1BQU1zQixLQUFLLEtBQUssV0FBV3RCLE1BQU1zQixLQUFLLEdBQUdhLEtBQUtDLEdBQUc7SUFDdEUsTUFBTUMsT0FBT3JDLE1BQU1xQyxJQUFJO0lBRXZCLGtDQUFrQztJQUNsQyxJQUFJQSxTQUFTLFFBQVE7UUFDbkIsT0FBTztZQUFFQTtZQUFNYixLQUFLO1FBQVU7SUFDaEM7SUFFQSxNQUFNQSxNQUFNWixPQUFPWjtJQUVuQixJQUFJQSxNQUFNTSxLQUFLLEVBQUU7UUFDZlksdUJBQXVCbEIsTUFBTU0sS0FBSztJQUNwQztJQUVBLElBQUlOLE1BQU1jLFdBQVcsSUFBSWQsTUFBTU0sS0FBSyxFQUFFO1FBQ3BDZSwyQkFBMkJyQixNQUFNYyxXQUFXLEVBQUVkLE1BQU1NLEtBQUssRUFBRWdCO0lBQzdEO0lBRUEsTUFBTWdCLEtBQUtQLGtCQUFrQlAsS0FBS0Y7SUFDbEMsSUFBSSxDQUFDZ0IsR0FBR0MsRUFBRSxFQUFFO1FBQ1YsSUFBSUQsR0FBR0UsSUFBSSxLQUFLLFlBQVk7WUFDMUIsTUFBTSxJQUFJcEQsc0JBQ1IsS0FDQTtRQUVKO1FBQ0EsSUFBSWtELEdBQUdFLElBQUksS0FBSyxhQUFhO1lBQzNCLE1BQU0sSUFBSXBELHNCQUNSLEtBQ0E7UUFFSjtRQUNBLE1BQU0sSUFBSUEsc0JBQ1IsS0FDQTtJQUVKO0lBRUEsT0FBTztRQUFFaUQ7UUFBTWI7UUFBS2lCLGdCQUFnQkgsR0FBR0csY0FBYztJQUFDO0FBQ3hEIiwic291cmNlcyI6WyJDOlxcUHJvamVjdHNcXFN5bnFyYVxcYXBwc1xcc3lucXJhLW12cFxcbGliXFxzZWN1cml0eVxcZ2F0ZWtlZXBlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3J5cHRvIGZyb20gXCJjcnlwdG9cIjtcclxuaW1wb3J0IGRpc3Bvc2FibGVEb21haW5zIGZyb20gXCJkaXNwb3NhYmxlLWVtYWlsLWRvbWFpbnNcIjtcclxuaW1wb3J0IHsgYmFuS2V5LCByYXRlTGltaXRDaGVja0FuZEluY3JlbWVudCwgdHlwZSBSYXRlTGltaXREZWNpc2lvbiB9IGZyb20gXCIuL3JhdGVMaW1pdFwiO1xyXG5cclxuZXhwb3J0IHR5cGUgU3lucXJhVGllciA9IFwiZnJlZVwiIHwgXCJwcmVtaXVtXCIgfCBcImVudGVycHJpc2VcIjtcclxuXHJcbnR5cGUgR2F0ZWtlZXBlcklucHV0ID0ge1xyXG4gIHRpZXI6IFN5bnFyYVRpZXI7XHJcbiAgZmluZ2VycHJpbnQ/OiBzdHJpbmcgfCBudWxsO1xyXG4gIGVtYWlsPzogc3RyaW5nIHwgbnVsbDtcclxuICBpcD86IHN0cmluZyB8IG51bGw7XHJcbiAgdXNlckFnZW50Pzogc3RyaW5nIHwgbnVsbDtcclxuICBub3dNcz86IG51bWJlcjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEdhdGVrZWVwZXJSZXN1bHQgPSB7XHJcbiAgdGllcjogU3lucXJhVGllcjtcclxuICBrZXk6IHN0cmluZztcclxuICByZW1haW5pbmdUb2RheT86IG51bWJlcjtcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBQdWJsaWNHYXRla2VlcGVyRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgc3RhdHVzOiBudW1iZXI7XHJcbiAgY29uc3RydWN0b3Ioc3RhdHVzOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcclxuICB9XHJcbn1cclxuXHJcbnR5cGUgRmluZ2VycHJpbnRTdGF0ZSA9IHtcclxuICBlbWFpbHNCeUZpbmdlcnByaW50OiBNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj47XHJcbn07XHJcblxyXG5mdW5jdGlvbiBnZXRHbG9iYWxGaW5nZXJwcmludFN0YXRlKCk6IEZpbmdlcnByaW50U3RhdGUge1xyXG4gIGNvbnN0IGcgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMgeyBfX3N5bnFyYUZpbmdlcnByaW50U3RhdGU/OiBGaW5nZXJwcmludFN0YXRlIH07XHJcbiAgaWYgKCFnLl9fc3lucXJhRmluZ2VycHJpbnRTdGF0ZSkge1xyXG4gICAgZy5fX3N5bnFyYUZpbmdlcnByaW50U3RhdGUgPSB7IGVtYWlsc0J5RmluZ2VycHJpbnQ6IG5ldyBNYXAoKSB9O1xyXG4gIH1cclxuICByZXR1cm4gZy5fX3N5bnFyYUZpbmdlcnByaW50U3RhdGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0YWJsZUhhc2goaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGNyeXB0by5jcmVhdGVIYXNoKFwic2hhMjU2XCIpLnVwZGF0ZShpbnB1dCkuZGlnZXN0KFwiaGV4XCIpLnNsaWNlKDAsIDMyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplRW1haWwoZW1haWw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGVtYWlsLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRFbWFpbERvbWFpbihlbWFpbDogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCBhdCA9IGVtYWlsLmxhc3RJbmRleE9mKFwiQFwiKTtcclxuICByZXR1cm4gYXQgPT09IC0xID8gXCJcIiA6IGVtYWlsLnNsaWNlKGF0ICsgMSkudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEtleShpbnB1dDogUGljazxHYXRla2VlcGVySW5wdXQsIFwiZmluZ2VycHJpbnRcIiB8IFwiaXBcIiB8IFwidXNlckFnZW50XCI+KTogc3RyaW5nIHtcclxuICBjb25zdCBmcCA9IChpbnB1dC5maW5nZXJwcmludCB8fCBcIlwiKS50cmltKCk7XHJcbiAgaWYgKGZwKSByZXR1cm4gYGZwOiR7ZnB9YDtcclxuICBjb25zdCBpcCA9IChpbnB1dC5pcCB8fCBcIlwiKS50cmltKCkgfHwgXCJpcDp1bmtub3duXCI7XHJcbiAgY29uc3QgdWEgPSAoaW5wdXQudXNlckFnZW50IHx8IFwiXCIpLnRyaW0oKSB8fCBcInVhOnVua25vd25cIjtcclxuICByZXR1cm4gYGFub246JHtzdGFibGVIYXNoKGAke2lwfXwke3VhfWApfWA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuZm9yY2VEaXNwb3NhYmxlRW1haWwoZW1haWw6IHN0cmluZykge1xyXG4gIGNvbnN0IGRvbWFpbiA9IGdldEVtYWlsRG9tYWluKGVtYWlsKTtcclxuICBpZiAoIWRvbWFpbikgcmV0dXJuO1xyXG4gIGlmIChkaXNwb3NhYmxlRG9tYWlucy5pbmNsdWRlcyhkb21haW4pKSB7XHJcbiAgICB0aHJvdyBuZXcgUHVibGljR2F0ZWtlZXBlckVycm9yKFxyXG4gICAgICA0MDMsXHJcbiAgICAgIFwiU3lucXJhIExpdGUgcmVxdWlyZXMgYSBub24tZGlzcG9zYWJsZSBlbWFpbC4gUGxlYXNlIHVzZSBhIHdvcmsgZW1haWwgb3IgdXBncmFkZSB0byBjb250aW51ZS5cIlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuZm9yY2VEZXZpY2VBY2NvdW50TGltaXRzKGZpbmdlcnByaW50OiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIG5vd01zOiBudW1iZXIpIHtcclxuICBjb25zdCBzdGF0ZSA9IGdldEdsb2JhbEZpbmdlcnByaW50U3RhdGUoKTtcclxuICBjb25zdCBrZXkgPSBmaW5nZXJwcmludC50cmltKCk7XHJcbiAgaWYgKCFrZXkpIHJldHVybjtcclxuXHJcbiAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZUVtYWlsKGVtYWlsKTtcclxuICBjb25zdCBzZXQgPSBzdGF0ZS5lbWFpbHNCeUZpbmdlcnByaW50LmdldChrZXkpID8/IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gIHNldC5hZGQobm9ybWFsaXplZCk7XHJcbiAgc3RhdGUuZW1haWxzQnlGaW5nZXJwcmludC5zZXQoa2V5LCBzZXQpO1xyXG5cclxuICAvLyBCYXRjaCBiYW4gaWYgNSsgYWNjb3VudHMgc2hhcmUgZmluZ2VycHJpbnQgKGRvIG5vdCBkaXNjbG9zZSByZWFzb24pXHJcbiAgaWYgKHNldC5zaXplID49IDUpIHtcclxuICAgIGJhbktleShgZnA6JHtrZXl9YCwgbm93TXMgKyAxMDAwICogNjAgKiA2MCAqIDI0ICogNyk7IC8vIDcgZGF5c1xyXG4gICAgdGhyb3cgbmV3IFB1YmxpY0dhdGVrZWVwZXJFcnJvcihcclxuICAgICAgNDAzLFxyXG4gICAgICBcIlN5bnFyYSBMaXRlIGlzIHVuYXZhaWxhYmxlIG9uIHRoaXMgZGV2aWNlLiBVcGdyYWRlIHRvIGNvbnRpbnVlLlwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gTWF4IDIgYWNjb3VudHMgcGVyIGRldmljZSAoZG8gbm90IGRpc2Nsb3NlIGV4YWN0IHRocmVzaG9sZClcclxuICBpZiAoc2V0LnNpemUgPiAyKSB7XHJcbiAgICB0aHJvdyBuZXcgUHVibGljR2F0ZWtlZXBlckVycm9yKFxyXG4gICAgICA0MDMsXHJcbiAgICAgIFwiVGhpcyBkZXZpY2UgaGFzIHJlYWNoZWQgdGhlIFN5bnFyYSBMaXRlIGFjY291bnQgbGltaXQuIFVwZ3JhZGUgdG8gY29udGludWUuXCJcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBlbmZvcmNlUmF0ZUxpbWl0cyhrZXk6IHN0cmluZywgbm93TXM6IG51bWJlcik6IFJhdGVMaW1pdERlY2lzaW9uIHtcclxuICAvLyBTeW5xcmEgTGl0ZSBjb25zdHJhaW50cyAoY29zdCBndWFyZHJhaWxzKVxyXG4gIHJldHVybiByYXRlTGltaXRDaGVja0FuZEluY3JlbWVudChrZXksIG5vd01zLCB7XHJcbiAgICBtaW5JbnRlcnZhbE1zOiAzMF8wMDAsXHJcbiAgICBkYWlseUNhcDogMTAsXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlbmZvcmNlU3lucXJhTGl0ZURyYWZ0U2VjdXJpdHkoaW5wdXQ6IEdhdGVrZWVwZXJJbnB1dCk6IEdhdGVrZWVwZXJSZXN1bHQge1xyXG4gIGNvbnN0IG5vd01zID0gdHlwZW9mIGlucHV0Lm5vd01zID09PSBcIm51bWJlclwiID8gaW5wdXQubm93TXMgOiBEYXRlLm5vdygpO1xyXG4gIGNvbnN0IHRpZXIgPSBpbnB1dC50aWVyO1xyXG5cclxuICAvLyBQcmVtaXVtIHRpZXJzIG11c3Qgbm90IHJlZ3Jlc3MuXHJcbiAgaWYgKHRpZXIgIT09IFwiZnJlZVwiKSB7XHJcbiAgICByZXR1cm4geyB0aWVyLCBrZXk6IFwicHJlbWl1bVwiIH07XHJcbiAgfVxyXG5cclxuICBjb25zdCBrZXkgPSBnZXRLZXkoaW5wdXQpO1xyXG5cclxuICBpZiAoaW5wdXQuZW1haWwpIHtcclxuICAgIGVuZm9yY2VEaXNwb3NhYmxlRW1haWwoaW5wdXQuZW1haWwpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGlucHV0LmZpbmdlcnByaW50ICYmIGlucHV0LmVtYWlsKSB7XHJcbiAgICBlbmZvcmNlRGV2aWNlQWNjb3VudExpbWl0cyhpbnB1dC5maW5nZXJwcmludCwgaW5wdXQuZW1haWwsIG5vd01zKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJsID0gZW5mb3JjZVJhdGVMaW1pdHMoa2V5LCBub3dNcyk7XHJcbiAgaWYgKCFybC5vaykge1xyXG4gICAgaWYgKHJsLmtpbmQgPT09IFwidG9vX2Zhc3RcIikge1xyXG4gICAgICB0aHJvdyBuZXcgUHVibGljR2F0ZWtlZXBlckVycm9yKFxyXG4gICAgICAgIDQyOSxcclxuICAgICAgICBcIlN5bnFyYSBMaXRlIGFsbG93cyBvbmUgZ2VuZXJhdGlvbiBldmVyeSAzMCBzZWNvbmRzLiBQbGVhc2Ugd2FpdCBhIG1vbWVudCBvciB1cGdyYWRlIGZvciBmYXN0ZXIgYWNjZXNzLlwiXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBpZiAocmwua2luZCA9PT0gXCJkYWlseV9jYXBcIikge1xyXG4gICAgICB0aHJvdyBuZXcgUHVibGljR2F0ZWtlZXBlckVycm9yKFxyXG4gICAgICAgIDQyOSxcclxuICAgICAgICBcIllvdeKAmXZlIHJlYWNoZWQgdG9kYXnigJlzIFN5bnFyYSBMaXRlIGxpbWl0ICgxMCBnZW5lcmF0aW9ucykuIFVwZ3JhZGUgdG8gY29udGludWUuXCJcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBQdWJsaWNHYXRla2VlcGVyRXJyb3IoXHJcbiAgICAgIDQwMyxcclxuICAgICAgXCJTeW5xcmEgTGl0ZSBpcyB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZS4gVXBncmFkZSB0byBjb250aW51ZS5cIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB7IHRpZXIsIGtleSwgcmVtYWluaW5nVG9kYXk6IHJsLnJlbWFpbmluZ1RvZGF5IH07XHJcbn1cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiY3J5cHRvIiwiZGlzcG9zYWJsZURvbWFpbnMiLCJiYW5LZXkiLCJyYXRlTGltaXRDaGVja0FuZEluY3JlbWVudCIsIlB1YmxpY0dhdGVrZWVwZXJFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJzdGF0dXMiLCJtZXNzYWdlIiwiZ2V0R2xvYmFsRmluZ2VycHJpbnRTdGF0ZSIsImciLCJnbG9iYWxUaGlzIiwiX19zeW5xcmFGaW5nZXJwcmludFN0YXRlIiwiZW1haWxzQnlGaW5nZXJwcmludCIsIk1hcCIsInN0YWJsZUhhc2giLCJpbnB1dCIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiLCJzbGljZSIsIm5vcm1hbGl6ZUVtYWlsIiwiZW1haWwiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJnZXRFbWFpbERvbWFpbiIsImF0IiwibGFzdEluZGV4T2YiLCJnZXRLZXkiLCJmcCIsImZpbmdlcnByaW50IiwiaXAiLCJ1YSIsInVzZXJBZ2VudCIsImVuZm9yY2VEaXNwb3NhYmxlRW1haWwiLCJkb21haW4iLCJpbmNsdWRlcyIsImVuZm9yY2VEZXZpY2VBY2NvdW50TGltaXRzIiwibm93TXMiLCJzdGF0ZSIsImtleSIsIm5vcm1hbGl6ZWQiLCJzZXQiLCJnZXQiLCJTZXQiLCJhZGQiLCJzaXplIiwiZW5mb3JjZVJhdGVMaW1pdHMiLCJtaW5JbnRlcnZhbE1zIiwiZGFpbHlDYXAiLCJlbmZvcmNlU3lucXJhTGl0ZURyYWZ0U2VjdXJpdHkiLCJEYXRlIiwibm93IiwidGllciIsInJsIiwib2siLCJraW5kIiwicmVtYWluaW5nVG9kYXkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/security/gatekeeper.ts\n");

/***/ }),

/***/ "(rsc)/./lib/security/rateLimit.ts":
/*!***********************************!*\
  !*** ./lib/security/rateLimit.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   banKey: () => (/* binding */ banKey),\n/* harmony export */   rateLimitCheckAndIncrement: () => (/* binding */ rateLimitCheckAndIncrement)\n/* harmony export */ });\nfunction getUtcDayKey(nowMs) {\n    const d = new Date(nowMs);\n    const yyyy = d.getUTCFullYear();\n    const mm = String(d.getUTCMonth() + 1).padStart(2, \"0\");\n    const dd = String(d.getUTCDate()).padStart(2, \"0\");\n    return `${yyyy}-${mm}-${dd}`;\n}\nfunction getDayResetIso(nowMs) {\n    const d = new Date(nowMs);\n    // next UTC midnight\n    const next = new Date(Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate() + 1, 0, 0, 0, 0));\n    return next.toISOString();\n}\nfunction getGlobalState() {\n    const g = globalThis;\n    if (!g.__synqraRateLimitState) {\n        g.__synqraRateLimitState = {\n            usageByKey: new Map(),\n            bannedUntilByKey: new Map()\n        };\n    }\n    return g.__synqraRateLimitState;\n}\nfunction rateLimitCheckAndIncrement(key, nowMs, config) {\n    const state = getGlobalState();\n    const bannedUntil = state.bannedUntilByKey.get(key);\n    if (typeof bannedUntil === \"number\" && bannedUntil > nowMs) {\n        return {\n            ok: false,\n            kind: \"banned\"\n        };\n    }\n    const dayKey = getUtcDayKey(nowMs);\n    const existing = state.usageByKey.get(key);\n    const current = existing ? existing.day === dayKey ? existing : {\n        day: dayKey,\n        count: 0,\n        lastAtMs: 0\n    } : {\n        day: dayKey,\n        count: 0,\n        lastAtMs: 0\n    };\n    if (current.lastAtMs && nowMs - current.lastAtMs < config.minIntervalMs) {\n        return {\n            ok: false,\n            kind: \"too_fast\",\n            retryAfterMs: config.minIntervalMs - (nowMs - current.lastAtMs)\n        };\n    }\n    if (current.count >= config.dailyCap) {\n        return {\n            ok: false,\n            kind: \"daily_cap\",\n            resetAtIso: getDayResetIso(nowMs)\n        };\n    }\n    current.count += 1;\n    current.lastAtMs = nowMs;\n    state.usageByKey.set(key, current);\n    return {\n        ok: true,\n        remainingToday: Math.max(0, config.dailyCap - current.count)\n    };\n}\nfunction banKey(key, untilMs) {\n    const state = getGlobalState();\n    state.bannedUntilByKey.set(key, untilMs);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2VjdXJpdHkvcmF0ZUxpbWl0LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBMkJBLFNBQVNBLGFBQWFDLEtBQWE7SUFDakMsTUFBTUMsSUFBSSxJQUFJQyxLQUFLRjtJQUNuQixNQUFNRyxPQUFPRixFQUFFRyxjQUFjO0lBQzdCLE1BQU1DLEtBQUtDLE9BQU9MLEVBQUVNLFdBQVcsS0FBSyxHQUFHQyxRQUFRLENBQUMsR0FBRztJQUNuRCxNQUFNQyxLQUFLSCxPQUFPTCxFQUFFUyxVQUFVLElBQUlGLFFBQVEsQ0FBQyxHQUFHO0lBQzlDLE9BQU8sR0FBR0wsS0FBSyxDQUFDLEVBQUVFLEdBQUcsQ0FBQyxFQUFFSSxJQUFJO0FBQzlCO0FBRUEsU0FBU0UsZUFBZVgsS0FBYTtJQUNuQyxNQUFNQyxJQUFJLElBQUlDLEtBQUtGO0lBQ25CLG9CQUFvQjtJQUNwQixNQUFNWSxPQUFPLElBQUlWLEtBQ2ZBLEtBQUtXLEdBQUcsQ0FBQ1osRUFBRUcsY0FBYyxJQUFJSCxFQUFFTSxXQUFXLElBQUlOLEVBQUVTLFVBQVUsS0FBSyxHQUFHLEdBQUcsR0FBRyxHQUFHO0lBRTdFLE9BQU9FLEtBQUtFLFdBQVc7QUFDekI7QUFFQSxTQUFTQztJQUNQLE1BQU1DLElBQUlDO0lBR1YsSUFBSSxDQUFDRCxFQUFFRSxzQkFBc0IsRUFBRTtRQUM3QkYsRUFBRUUsc0JBQXNCLEdBQUc7WUFDekJDLFlBQVksSUFBSUM7WUFDaEJDLGtCQUFrQixJQUFJRDtRQUN4QjtJQUNGO0lBQ0EsT0FBT0osRUFBRUUsc0JBQXNCO0FBQ2pDO0FBRU8sU0FBU0ksMkJBQ2RDLEdBQVcsRUFDWHZCLEtBQWEsRUFDYndCLE1BQXVCO0lBRXZCLE1BQU1DLFFBQVFWO0lBRWQsTUFBTVcsY0FBY0QsTUFBTUosZ0JBQWdCLENBQUNNLEdBQUcsQ0FBQ0o7SUFDL0MsSUFBSSxPQUFPRyxnQkFBZ0IsWUFBWUEsY0FBYzFCLE9BQU87UUFDMUQsT0FBTztZQUFFNEIsSUFBSTtZQUFPQyxNQUFNO1FBQVM7SUFDckM7SUFFQSxNQUFNQyxTQUFTL0IsYUFBYUM7SUFDNUIsTUFBTStCLFdBQVdOLE1BQU1OLFVBQVUsQ0FBQ1EsR0FBRyxDQUFDSjtJQUV0QyxNQUFNUyxVQUF3QkQsV0FDMUJBLFNBQVNFLEdBQUcsS0FBS0gsU0FDZkMsV0FDQTtRQUFFRSxLQUFLSDtRQUFRSSxPQUFPO1FBQUdDLFVBQVU7SUFBRSxJQUN2QztRQUFFRixLQUFLSDtRQUFRSSxPQUFPO1FBQUdDLFVBQVU7SUFBRTtJQUV6QyxJQUFJSCxRQUFRRyxRQUFRLElBQUluQyxRQUFRZ0MsUUFBUUcsUUFBUSxHQUFHWCxPQUFPWSxhQUFhLEVBQUU7UUFDdkUsT0FBTztZQUNMUixJQUFJO1lBQ0pDLE1BQU07WUFDTlEsY0FBY2IsT0FBT1ksYUFBYSxHQUFJcEMsQ0FBQUEsUUFBUWdDLFFBQVFHLFFBQVE7UUFDaEU7SUFDRjtJQUVBLElBQUlILFFBQVFFLEtBQUssSUFBSVYsT0FBT2MsUUFBUSxFQUFFO1FBQ3BDLE9BQU87WUFDTFYsSUFBSTtZQUNKQyxNQUFNO1lBQ05VLFlBQVk1QixlQUFlWDtRQUM3QjtJQUNGO0lBRUFnQyxRQUFRRSxLQUFLLElBQUk7SUFDakJGLFFBQVFHLFFBQVEsR0FBR25DO0lBQ25CeUIsTUFBTU4sVUFBVSxDQUFDcUIsR0FBRyxDQUFDakIsS0FBS1M7SUFFMUIsT0FBTztRQUFFSixJQUFJO1FBQU1hLGdCQUFnQkMsS0FBS0MsR0FBRyxDQUFDLEdBQUduQixPQUFPYyxRQUFRLEdBQUdOLFFBQVFFLEtBQUs7SUFBRTtBQUNsRjtBQUVPLFNBQVNVLE9BQU9yQixHQUFXLEVBQUVzQixPQUFlO0lBQ2pELE1BQU1wQixRQUFRVjtJQUNkVSxNQUFNSixnQkFBZ0IsQ0FBQ21CLEdBQUcsQ0FBQ2pCLEtBQUtzQjtBQUNsQyIsInNvdXJjZXMiOlsiQzpcXFByb2plY3RzXFxTeW5xcmFcXGFwcHNcXHN5bnFyYS1tdnBcXGxpYlxcc2VjdXJpdHlcXHJhdGVMaW1pdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJ0eXBlIFJhdGVMaW1pdENvbmZpZyA9IHtcclxuICAvKiogTWluaW11bSBtcyBiZXR3ZWVuIGdlbmVyYXRpb25zICovXHJcbiAgbWluSW50ZXJ2YWxNczogbnVtYmVyO1xyXG4gIC8qKiBNYXggZ2VuZXJhdGlvbnMgcGVyIFVUQyBkYXkgKi9cclxuICBkYWlseUNhcDogbnVtYmVyO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgUmF0ZUxpbWl0RGVjaXNpb24gPVxyXG4gIHwgeyBvazogdHJ1ZTsgcmVtYWluaW5nVG9kYXk6IG51bWJlciB9XHJcbiAgfCB7XHJcbiAgICAgIG9rOiBmYWxzZTtcclxuICAgICAga2luZDogXCJ0b29fZmFzdFwiIHwgXCJkYWlseV9jYXBcIiB8IFwiYmFubmVkXCI7XHJcbiAgICAgIHJldHJ5QWZ0ZXJNcz86IG51bWJlcjtcclxuICAgICAgcmVzZXRBdElzbz86IHN0cmluZztcclxuICAgIH07XHJcblxyXG50eXBlIFVzYWdlQ291bnRlciA9IHtcclxuICBkYXk6IHN0cmluZzsgLy8gVVRDIFlZWVktTU0tRERcclxuICBjb3VudDogbnVtYmVyO1xyXG4gIGxhc3RBdE1zOiBudW1iZXI7XHJcbn07XHJcblxyXG50eXBlIFJhdGVMaW1pdFN0YXRlID0ge1xyXG4gIHVzYWdlQnlLZXk6IE1hcDxzdHJpbmcsIFVzYWdlQ291bnRlcj47XHJcbiAgYmFubmVkVW50aWxCeUtleTogTWFwPHN0cmluZywgbnVtYmVyPjtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGdldFV0Y0RheUtleShub3dNczogbnVtYmVyKTogc3RyaW5nIHtcclxuICBjb25zdCBkID0gbmV3IERhdGUobm93TXMpO1xyXG4gIGNvbnN0IHl5eXkgPSBkLmdldFVUQ0Z1bGxZZWFyKCk7XHJcbiAgY29uc3QgbW0gPSBTdHJpbmcoZC5nZXRVVENNb250aCgpICsgMSkucGFkU3RhcnQoMiwgXCIwXCIpO1xyXG4gIGNvbnN0IGRkID0gU3RyaW5nKGQuZ2V0VVRDRGF0ZSgpKS5wYWRTdGFydCgyLCBcIjBcIik7XHJcbiAgcmV0dXJuIGAke3l5eXl9LSR7bW19LSR7ZGR9YDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RGF5UmVzZXRJc28obm93TXM6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgY29uc3QgZCA9IG5ldyBEYXRlKG5vd01zKTtcclxuICAvLyBuZXh0IFVUQyBtaWRuaWdodFxyXG4gIGNvbnN0IG5leHQgPSBuZXcgRGF0ZShcclxuICAgIERhdGUuVVRDKGQuZ2V0VVRDRnVsbFllYXIoKSwgZC5nZXRVVENNb250aCgpLCBkLmdldFVUQ0RhdGUoKSArIDEsIDAsIDAsIDAsIDApXHJcbiAgKTtcclxuICByZXR1cm4gbmV4dC50b0lTT1N0cmluZygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRHbG9iYWxTdGF0ZSgpOiBSYXRlTGltaXRTdGF0ZSB7XHJcbiAgY29uc3QgZyA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XHJcbiAgICBfX3N5bnFyYVJhdGVMaW1pdFN0YXRlPzogUmF0ZUxpbWl0U3RhdGU7XHJcbiAgfTtcclxuICBpZiAoIWcuX19zeW5xcmFSYXRlTGltaXRTdGF0ZSkge1xyXG4gICAgZy5fX3N5bnFyYVJhdGVMaW1pdFN0YXRlID0ge1xyXG4gICAgICB1c2FnZUJ5S2V5OiBuZXcgTWFwKCksXHJcbiAgICAgIGJhbm5lZFVudGlsQnlLZXk6IG5ldyBNYXAoKSxcclxuICAgIH07XHJcbiAgfVxyXG4gIHJldHVybiBnLl9fc3lucXJhUmF0ZUxpbWl0U3RhdGU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByYXRlTGltaXRDaGVja0FuZEluY3JlbWVudChcclxuICBrZXk6IHN0cmluZyxcclxuICBub3dNczogbnVtYmVyLFxyXG4gIGNvbmZpZzogUmF0ZUxpbWl0Q29uZmlnXHJcbik6IFJhdGVMaW1pdERlY2lzaW9uIHtcclxuICBjb25zdCBzdGF0ZSA9IGdldEdsb2JhbFN0YXRlKCk7XHJcblxyXG4gIGNvbnN0IGJhbm5lZFVudGlsID0gc3RhdGUuYmFubmVkVW50aWxCeUtleS5nZXQoa2V5KTtcclxuICBpZiAodHlwZW9mIGJhbm5lZFVudGlsID09PSBcIm51bWJlclwiICYmIGJhbm5lZFVudGlsID4gbm93TXMpIHtcclxuICAgIHJldHVybiB7IG9rOiBmYWxzZSwga2luZDogXCJiYW5uZWRcIiB9O1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZGF5S2V5ID0gZ2V0VXRjRGF5S2V5KG5vd01zKTtcclxuICBjb25zdCBleGlzdGluZyA9IHN0YXRlLnVzYWdlQnlLZXkuZ2V0KGtleSk7XHJcblxyXG4gIGNvbnN0IGN1cnJlbnQ6IFVzYWdlQ291bnRlciA9IGV4aXN0aW5nXHJcbiAgICA/IGV4aXN0aW5nLmRheSA9PT0gZGF5S2V5XHJcbiAgICAgID8gZXhpc3RpbmdcclxuICAgICAgOiB7IGRheTogZGF5S2V5LCBjb3VudDogMCwgbGFzdEF0TXM6IDAgfVxyXG4gICAgOiB7IGRheTogZGF5S2V5LCBjb3VudDogMCwgbGFzdEF0TXM6IDAgfTtcclxuXHJcbiAgaWYgKGN1cnJlbnQubGFzdEF0TXMgJiYgbm93TXMgLSBjdXJyZW50Lmxhc3RBdE1zIDwgY29uZmlnLm1pbkludGVydmFsTXMpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG9rOiBmYWxzZSxcclxuICAgICAga2luZDogXCJ0b29fZmFzdFwiLFxyXG4gICAgICByZXRyeUFmdGVyTXM6IGNvbmZpZy5taW5JbnRlcnZhbE1zIC0gKG5vd01zIC0gY3VycmVudC5sYXN0QXRNcyksXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgaWYgKGN1cnJlbnQuY291bnQgPj0gY29uZmlnLmRhaWx5Q2FwKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBvazogZmFsc2UsXHJcbiAgICAgIGtpbmQ6IFwiZGFpbHlfY2FwXCIsXHJcbiAgICAgIHJlc2V0QXRJc286IGdldERheVJlc2V0SXNvKG5vd01zKSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjdXJyZW50LmNvdW50ICs9IDE7XHJcbiAgY3VycmVudC5sYXN0QXRNcyA9IG5vd01zO1xyXG4gIHN0YXRlLnVzYWdlQnlLZXkuc2V0KGtleSwgY3VycmVudCk7XHJcblxyXG4gIHJldHVybiB7IG9rOiB0cnVlLCByZW1haW5pbmdUb2RheTogTWF0aC5tYXgoMCwgY29uZmlnLmRhaWx5Q2FwIC0gY3VycmVudC5jb3VudCkgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJhbktleShrZXk6IHN0cmluZywgdW50aWxNczogbnVtYmVyKSB7XHJcbiAgY29uc3Qgc3RhdGUgPSBnZXRHbG9iYWxTdGF0ZSgpO1xyXG4gIHN0YXRlLmJhbm5lZFVudGlsQnlLZXkuc2V0KGtleSwgdW50aWxNcyk7XHJcbn1cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiZ2V0VXRjRGF5S2V5Iiwibm93TXMiLCJkIiwiRGF0ZSIsInl5eXkiLCJnZXRVVENGdWxsWWVhciIsIm1tIiwiU3RyaW5nIiwiZ2V0VVRDTW9udGgiLCJwYWRTdGFydCIsImRkIiwiZ2V0VVRDRGF0ZSIsImdldERheVJlc2V0SXNvIiwibmV4dCIsIlVUQyIsInRvSVNPU3RyaW5nIiwiZ2V0R2xvYmFsU3RhdGUiLCJnIiwiZ2xvYmFsVGhpcyIsIl9fc3lucXJhUmF0ZUxpbWl0U3RhdGUiLCJ1c2FnZUJ5S2V5IiwiTWFwIiwiYmFubmVkVW50aWxCeUtleSIsInJhdGVMaW1pdENoZWNrQW5kSW5jcmVtZW50Iiwia2V5IiwiY29uZmlnIiwic3RhdGUiLCJiYW5uZWRVbnRpbCIsImdldCIsIm9rIiwia2luZCIsImRheUtleSIsImV4aXN0aW5nIiwiY3VycmVudCIsImRheSIsImNvdW50IiwibGFzdEF0TXMiLCJtaW5JbnRlcnZhbE1zIiwicmV0cnlBZnRlck1zIiwiZGFpbHlDYXAiLCJyZXNldEF0SXNvIiwic2V0IiwicmVtYWluaW5nVG9kYXkiLCJNYXRoIiwibWF4IiwiYmFuS2V5IiwidW50aWxNcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/security/rateLimit.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/aiCouncil.ts":
/*!******************************!*\
  !*** ./src/lib/aiCouncil.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_COUNCIL_MEMBERS: () => (/* binding */ DEFAULT_COUNCIL_MEMBERS),\n/* harmony export */   queryCouncil: () => (/* binding */ queryCouncil),\n/* harmony export */   queryMember: () => (/* binding */ queryMember)\n/* harmony export */ });\n/* harmony import */ var _openrouter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./openrouter */ \"(rsc)/./src/lib/openrouter.ts\");\n/**\r\n * ============================================================\r\n * AI COUNCIL\r\n * ============================================================\r\n * Orchestrates multiple AI models to provide diverse perspectives\r\n * Uses OpenRouter to access multiple models through a unified API\r\n */ \n/**\r\n * Default council members\r\n */ const DEFAULT_COUNCIL_MEMBERS = [\n    {\n        model: _openrouter__WEBPACK_IMPORTED_MODULE_0__.OPENROUTER_MODELS.DEEPSEEK,\n        name: \"DeepSeek\",\n        role: \"Technical analyst and problem solver\",\n        temperature: 0.7\n    },\n    {\n        model: _openrouter__WEBPACK_IMPORTED_MODULE_0__.OPENROUTER_MODELS.CLAUDE,\n        name: \"Claude\",\n        role: \"Strategic advisor and nuanced thinker\",\n        temperature: 0.8\n    },\n    {\n        model: _openrouter__WEBPACK_IMPORTED_MODULE_0__.OPENROUTER_MODELS.GLM,\n        name: \"GLM\",\n        role: \"Creative strategist and innovator\",\n        temperature: 0.75\n    },\n    {\n        model: _openrouter__WEBPACK_IMPORTED_MODULE_0__.OPENROUTER_MODELS.GEMINI,\n        name: \"Gemini\",\n        role: \"Fast-paced executor and synthesizer\",\n        temperature: 0.7\n    }\n];\n/**\r\n * Query the AI Council\r\n * Each member provides their perspective on the prompt\r\n */ async function queryCouncil(request) {\n    const members = request.members || DEFAULT_COUNCIL_MEMBERS;\n    const systemPrompt = request.systemPrompt || buildDefaultSystemPrompt(members);\n    const responses = await Promise.all(members.map(async (member)=>{\n        try {\n            const messages = [\n                {\n                    role: \"system\",\n                    content: `${systemPrompt}\\n\\nYou are ${member.name}, ${member.role}.`\n                },\n                {\n                    role: \"user\",\n                    content: request.prompt\n                }\n            ];\n            const response = await (0,_openrouter__WEBPACK_IMPORTED_MODULE_0__.callOpenRouter)({\n                model: member.model,\n                messages,\n                temperature: member.temperature ?? request.temperature ?? 0.7,\n                max_tokens: request.maxTokens\n            });\n            return {\n                member: member.name,\n                model: member.model,\n                response: response.choices[0]?.message?.content || \"\",\n                tokens: {\n                    prompt: response.usage.prompt_tokens,\n                    completion: response.usage.completion_tokens,\n                    total: response.usage.total_tokens\n                }\n            };\n        } catch (error) {\n            console.error(`Error querying ${member.name}:`, error);\n            return {\n                member: member.name,\n                model: member.model,\n                response: `Error: ${error instanceof Error ? error.message : \"Unknown error\"}`\n            };\n        }\n    }));\n    const result = {\n        prompt: request.prompt,\n        responses,\n        timestamp: new Date().toISOString()\n    };\n    // Optionally generate consensus\n    if (responses.every((r)=>!r.response.startsWith(\"Error\"))) {\n        result.consensus = await generateConsensus(responses, request);\n    }\n    return result;\n}\n/**\r\n * Generate consensus from council responses\r\n */ async function generateConsensus(responses, originalRequest) {\n    const responsesText = responses.map((r)=>`${r.member}: ${r.response}`).join(\"\\n\\n\");\n    const consensusPrompt = `You are synthesizing perspectives from multiple AI advisors. Review their responses and provide a balanced consensus that incorporates the best insights from each.\n\nResponses:\n${responsesText}\n\nProvide a concise consensus that synthesizes these perspectives:`;\n    try {\n        return await (0,_openrouter__WEBPACK_IMPORTED_MODULE_0__.getChatCompletion)(_openrouter__WEBPACK_IMPORTED_MODULE_0__.OPENROUTER_MODELS.CLAUDE, [\n            {\n                role: \"user\",\n                content: consensusPrompt\n            }\n        ], {\n            systemPrompt: \"You are an expert synthesizer of diverse perspectives.\",\n            temperature: 0.6,\n            max_tokens: originalRequest.maxTokens\n        });\n    } catch (error) {\n        console.error(\"Error generating consensus:\", error);\n        return \"Consensus generation failed\";\n    }\n}\n/**\r\n * Build default system prompt for council\r\n */ function buildDefaultSystemPrompt(members) {\n    const memberList = members.map((m)=>`${m.name} (${m.role})`).join(\", \");\n    return `You are part of an AI council with the following members: ${memberList}. Each member provides their unique perspective. Provide thoughtful, well-reasoned responses that reflect your role and expertise.`;\n}\n/**\r\n * Query a single council member\r\n */ async function queryMember(member, prompt, systemPrompt, options) {\n    const messages = [\n        {\n            role: \"system\",\n            content: systemPrompt || `You are ${member.name}, ${member.role}.`\n        },\n        {\n            role: \"user\",\n            content: prompt\n        }\n    ];\n    const response = await (0,_openrouter__WEBPACK_IMPORTED_MODULE_0__.callOpenRouter)({\n        model: member.model,\n        messages,\n        temperature: options?.temperature ?? member.temperature ?? 0.7,\n        max_tokens: options?.maxTokens\n    });\n    return {\n        member: member.name,\n        model: member.model,\n        response: response.choices[0]?.message?.content || \"\",\n        tokens: {\n            prompt: response.usage.prompt_tokens,\n            completion: response.usage.completion_tokens,\n            total: response.usage.total_tokens\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FpQ291bmNpbC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7OztDQU1DLEdBUXFCO0FBbUN0Qjs7Q0FFQyxHQUNNLE1BQU1HLDBCQUEyQztJQUN0RDtRQUNFQyxPQUFPRiwwREFBaUJBLENBQUNHLFFBQVE7UUFDakNDLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxhQUFhO0lBQ2Y7SUFDQTtRQUNFSixPQUFPRiwwREFBaUJBLENBQUNPLE1BQU07UUFDL0JILE1BQU07UUFDTkMsTUFBTTtRQUNOQyxhQUFhO0lBQ2Y7SUFDQTtRQUNFSixPQUFPRiwwREFBaUJBLENBQUNRLEdBQUc7UUFDNUJKLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxhQUFhO0lBQ2Y7SUFDQTtRQUNFSixPQUFPRiwwREFBaUJBLENBQUNTLE1BQU07UUFDL0JMLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxhQUFhO0lBQ2Y7Q0FDRCxDQUFDO0FBRUY7OztDQUdDLEdBQ00sZUFBZUksYUFDcEJDLE9BQXVCO0lBRXZCLE1BQU1DLFVBQVVELFFBQVFDLE9BQU8sSUFBSVg7SUFDbkMsTUFBTVksZUFBZUYsUUFBUUUsWUFBWSxJQUFJQyx5QkFBeUJGO0lBRXRFLE1BQU1HLFlBQStCLE1BQU1DLFFBQVFDLEdBQUcsQ0FDcERMLFFBQVFNLEdBQUcsQ0FBQyxPQUFPQztRQUNqQixJQUFJO1lBQ0YsTUFBTUMsV0FBZ0M7Z0JBQ3BDO29CQUNFZixNQUFNO29CQUNOZ0IsU0FBUyxHQUFHUixhQUFhLFlBQVksRUFBRU0sT0FBT2YsSUFBSSxDQUFDLEVBQUUsRUFBRWUsT0FBT2QsSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDdkU7Z0JBQ0E7b0JBQ0VBLE1BQU07b0JBQ05nQixTQUFTVixRQUFRVyxNQUFNO2dCQUN6QjthQUNEO1lBRUQsTUFBTUMsV0FBVyxNQUFNekIsMkRBQWNBLENBQUM7Z0JBQ3BDSSxPQUFPaUIsT0FBT2pCLEtBQUs7Z0JBQ25Ca0I7Z0JBQ0FkLGFBQWFhLE9BQU9iLFdBQVcsSUFBSUssUUFBUUwsV0FBVyxJQUFJO2dCQUMxRGtCLFlBQVliLFFBQVFjLFNBQVM7WUFDL0I7WUFFQSxPQUFPO2dCQUNMTixRQUFRQSxPQUFPZixJQUFJO2dCQUNuQkYsT0FBT2lCLE9BQU9qQixLQUFLO2dCQUNuQnFCLFVBQVVBLFNBQVNHLE9BQU8sQ0FBQyxFQUFFLEVBQUVDLFNBQVNOLFdBQVc7Z0JBQ25ETyxRQUFRO29CQUNOTixRQUFRQyxTQUFTTSxLQUFLLENBQUNDLGFBQWE7b0JBQ3BDQyxZQUFZUixTQUFTTSxLQUFLLENBQUNHLGlCQUFpQjtvQkFDNUNDLE9BQU9WLFNBQVNNLEtBQUssQ0FBQ0ssWUFBWTtnQkFDcEM7WUFDRjtRQUNGLEVBQUUsT0FBT0MsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsQ0FBQyxlQUFlLEVBQUVoQixPQUFPZixJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUrQjtZQUNoRCxPQUFPO2dCQUNMaEIsUUFBUUEsT0FBT2YsSUFBSTtnQkFDbkJGLE9BQU9pQixPQUFPakIsS0FBSztnQkFDbkJxQixVQUFVLENBQUMsT0FBTyxFQUFFWSxpQkFBaUJFLFFBQVFGLE1BQU1SLE9BQU8sR0FBRyxpQkFBaUI7WUFDaEY7UUFDRjtJQUNGO0lBR0YsTUFBTVcsU0FBd0I7UUFDNUJoQixRQUFRWCxRQUFRVyxNQUFNO1FBQ3RCUDtRQUNBd0IsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO0lBQ25DO0lBRUEsZ0NBQWdDO0lBQ2hDLElBQUkxQixVQUFVMkIsS0FBSyxDQUFDLENBQUNDLElBQU0sQ0FBQ0EsRUFBRXBCLFFBQVEsQ0FBQ3FCLFVBQVUsQ0FBQyxXQUFXO1FBQzNETixPQUFPTyxTQUFTLEdBQUcsTUFBTUMsa0JBQWtCL0IsV0FBV0o7SUFDeEQ7SUFFQSxPQUFPMkI7QUFDVDtBQUVBOztDQUVDLEdBQ0QsZUFBZVEsa0JBQ2IvQixTQUE0QixFQUM1QmdDLGVBQStCO0lBRS9CLE1BQU1DLGdCQUFnQmpDLFVBQ25CRyxHQUFHLENBQUMsQ0FBQ3lCLElBQU0sR0FBR0EsRUFBRXhCLE1BQU0sQ0FBQyxFQUFFLEVBQUV3QixFQUFFcEIsUUFBUSxFQUFFLEVBQ3ZDMEIsSUFBSSxDQUFDO0lBRVIsTUFBTUMsa0JBQWtCLENBQUM7OztBQUczQixFQUFFRixjQUFjOztnRUFFZ0QsQ0FBQztJQUUvRCxJQUFJO1FBQ0YsT0FBTyxNQUFNakQsOERBQWlCQSxDQUM1QkMsMERBQWlCQSxDQUFDTyxNQUFNLEVBQ3hCO1lBQ0U7Z0JBQ0VGLE1BQU07Z0JBQ05nQixTQUFTNkI7WUFDWDtTQUNELEVBQ0Q7WUFDRXJDLGNBQWM7WUFDZFAsYUFBYTtZQUNia0IsWUFBWXVCLGdCQUFnQnRCLFNBQVM7UUFDdkM7SUFFSixFQUFFLE9BQU9VLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNELFNBQVNyQix5QkFBeUJGLE9BQXdCO0lBQ3hELE1BQU11QyxhQUFhdkMsUUFDaEJNLEdBQUcsQ0FBQyxDQUFDa0MsSUFBTSxHQUFHQSxFQUFFaEQsSUFBSSxDQUFDLEVBQUUsRUFBRWdELEVBQUUvQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQ2xDNEMsSUFBSSxDQUFDO0lBRVIsT0FBTyxDQUFDLDBEQUEwRCxFQUFFRSxXQUFXLGtJQUFrSSxDQUFDO0FBQ3BOO0FBRUE7O0NBRUMsR0FDTSxlQUFlRSxZQUNwQmxDLE1BQXFCLEVBQ3JCRyxNQUFjLEVBQ2RULFlBQXFCLEVBQ3JCeUMsT0FHQztJQUVELE1BQU1sQyxXQUFnQztRQUNwQztZQUNFZixNQUFNO1lBQ05nQixTQUFTUixnQkFBZ0IsQ0FBQyxRQUFRLEVBQUVNLE9BQU9mLElBQUksQ0FBQyxFQUFFLEVBQUVlLE9BQU9kLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDcEU7UUFDQTtZQUNFQSxNQUFNO1lBQ05nQixTQUFTQztRQUNYO0tBQ0Q7SUFFRCxNQUFNQyxXQUFXLE1BQU16QiwyREFBY0EsQ0FBQztRQUNwQ0ksT0FBT2lCLE9BQU9qQixLQUFLO1FBQ25Ca0I7UUFDQWQsYUFBYWdELFNBQVNoRCxlQUFlYSxPQUFPYixXQUFXLElBQUk7UUFDM0RrQixZQUFZOEIsU0FBUzdCO0lBQ3ZCO0lBRUEsT0FBTztRQUNMTixRQUFRQSxPQUFPZixJQUFJO1FBQ25CRixPQUFPaUIsT0FBT2pCLEtBQUs7UUFDbkJxQixVQUFVQSxTQUFTRyxPQUFPLENBQUMsRUFBRSxFQUFFQyxTQUFTTixXQUFXO1FBQ25ETyxRQUFRO1lBQ05OLFFBQVFDLFNBQVNNLEtBQUssQ0FBQ0MsYUFBYTtZQUNwQ0MsWUFBWVIsU0FBU00sS0FBSyxDQUFDRyxpQkFBaUI7WUFDNUNDLE9BQU9WLFNBQVNNLEtBQUssQ0FBQ0ssWUFBWTtRQUNwQztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxQcm9qZWN0c1xcU3lucXJhXFxhcHBzXFxzeW5xcmEtbXZwXFxzcmNcXGxpYlxcYWlDb3VuY2lsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogQUkgQ09VTkNJTFxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogT3JjaGVzdHJhdGVzIG11bHRpcGxlIEFJIG1vZGVscyB0byBwcm92aWRlIGRpdmVyc2UgcGVyc3BlY3RpdmVzXHJcbiAqIFVzZXMgT3BlblJvdXRlciB0byBhY2Nlc3MgbXVsdGlwbGUgbW9kZWxzIHRocm91Z2ggYSB1bmlmaWVkIEFQSVxyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgY2FsbE9wZW5Sb3V0ZXIsXHJcbiAgZ2V0Q2hhdENvbXBsZXRpb24sXHJcbiAgT1BFTlJPVVRFUl9NT0RFTFMsXHJcbiAgdHlwZSBPcGVuUm91dGVyTWVzc2FnZSxcclxuICB0eXBlIE9wZW5Sb3V0ZXJNb2RlbCxcclxufSBmcm9tIFwiLi9vcGVucm91dGVyXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvdW5jaWxNZW1iZXIge1xyXG4gIG1vZGVsOiBPcGVuUm91dGVyTW9kZWw7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHJvbGU6IHN0cmluZztcclxuICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDb3VuY2lsUmVxdWVzdCB7XHJcbiAgcHJvbXB0OiBzdHJpbmc7XHJcbiAgc3lzdGVtUHJvbXB0Pzogc3RyaW5nO1xyXG4gIG1lbWJlcnM/OiBDb3VuY2lsTWVtYmVyW107XHJcbiAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XHJcbiAgbWF4VG9rZW5zPzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvdW5jaWxSZXNwb25zZSB7XHJcbiAgbWVtYmVyOiBzdHJpbmc7XHJcbiAgbW9kZWw6IHN0cmluZztcclxuICByZXNwb25zZTogc3RyaW5nO1xyXG4gIHRva2Vucz86IHtcclxuICAgIHByb21wdDogbnVtYmVyO1xyXG4gICAgY29tcGxldGlvbjogbnVtYmVyO1xyXG4gICAgdG90YWw6IG51bWJlcjtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvdW5jaWxSZXN1bHQge1xyXG4gIHByb21wdDogc3RyaW5nO1xyXG4gIHJlc3BvbnNlczogQ291bmNpbFJlc3BvbnNlW107XHJcbiAgY29uc2Vuc3VzPzogc3RyaW5nO1xyXG4gIHRpbWVzdGFtcDogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogRGVmYXVsdCBjb3VuY2lsIG1lbWJlcnNcclxuICovXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX0NPVU5DSUxfTUVNQkVSUzogQ291bmNpbE1lbWJlcltdID0gW1xyXG4gIHtcclxuICAgIG1vZGVsOiBPUEVOUk9VVEVSX01PREVMUy5ERUVQU0VFSyxcclxuICAgIG5hbWU6IFwiRGVlcFNlZWtcIixcclxuICAgIHJvbGU6IFwiVGVjaG5pY2FsIGFuYWx5c3QgYW5kIHByb2JsZW0gc29sdmVyXCIsXHJcbiAgICB0ZW1wZXJhdHVyZTogMC43LFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbW9kZWw6IE9QRU5ST1VURVJfTU9ERUxTLkNMQVVERSxcclxuICAgIG5hbWU6IFwiQ2xhdWRlXCIsXHJcbiAgICByb2xlOiBcIlN0cmF0ZWdpYyBhZHZpc29yIGFuZCBudWFuY2VkIHRoaW5rZXJcIixcclxuICAgIHRlbXBlcmF0dXJlOiAwLjgsXHJcbiAgfSxcclxuICB7XHJcbiAgICBtb2RlbDogT1BFTlJPVVRFUl9NT0RFTFMuR0xNLFxyXG4gICAgbmFtZTogXCJHTE1cIixcclxuICAgIHJvbGU6IFwiQ3JlYXRpdmUgc3RyYXRlZ2lzdCBhbmQgaW5ub3ZhdG9yXCIsXHJcbiAgICB0ZW1wZXJhdHVyZTogMC43NSxcclxuICB9LFxyXG4gIHtcclxuICAgIG1vZGVsOiBPUEVOUk9VVEVSX01PREVMUy5HRU1JTkksXHJcbiAgICBuYW1lOiBcIkdlbWluaVwiLFxyXG4gICAgcm9sZTogXCJGYXN0LXBhY2VkIGV4ZWN1dG9yIGFuZCBzeW50aGVzaXplclwiLFxyXG4gICAgdGVtcGVyYXR1cmU6IDAuNyxcclxuICB9LFxyXG5dO1xyXG5cclxuLyoqXHJcbiAqIFF1ZXJ5IHRoZSBBSSBDb3VuY2lsXHJcbiAqIEVhY2ggbWVtYmVyIHByb3ZpZGVzIHRoZWlyIHBlcnNwZWN0aXZlIG9uIHRoZSBwcm9tcHRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeUNvdW5jaWwoXHJcbiAgcmVxdWVzdDogQ291bmNpbFJlcXVlc3RcclxuKTogUHJvbWlzZTxDb3VuY2lsUmVzdWx0PiB7XHJcbiAgY29uc3QgbWVtYmVycyA9IHJlcXVlc3QubWVtYmVycyB8fCBERUZBVUxUX0NPVU5DSUxfTUVNQkVSUztcclxuICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSByZXF1ZXN0LnN5c3RlbVByb21wdCB8fCBidWlsZERlZmF1bHRTeXN0ZW1Qcm9tcHQobWVtYmVycyk7XHJcblxyXG4gIGNvbnN0IHJlc3BvbnNlczogQ291bmNpbFJlc3BvbnNlW10gPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgIG1lbWJlcnMubWFwKGFzeW5jIChtZW1iZXIpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlczogT3BlblJvdXRlck1lc3NhZ2VbXSA9IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcm9sZTogXCJzeXN0ZW1cIixcclxuICAgICAgICAgICAgY29udGVudDogYCR7c3lzdGVtUHJvbXB0fVxcblxcbllvdSBhcmUgJHttZW1iZXIubmFtZX0sICR7bWVtYmVyLnJvbGV9LmAsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcclxuICAgICAgICAgICAgY29udGVudDogcmVxdWVzdC5wcm9tcHQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2FsbE9wZW5Sb3V0ZXIoe1xyXG4gICAgICAgICAgbW9kZWw6IG1lbWJlci5tb2RlbCxcclxuICAgICAgICAgIG1lc3NhZ2VzLFxyXG4gICAgICAgICAgdGVtcGVyYXR1cmU6IG1lbWJlci50ZW1wZXJhdHVyZSA/PyByZXF1ZXN0LnRlbXBlcmF0dXJlID8/IDAuNyxcclxuICAgICAgICAgIG1heF90b2tlbnM6IHJlcXVlc3QubWF4VG9rZW5zLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgbWVtYmVyOiBtZW1iZXIubmFtZSxcclxuICAgICAgICAgIG1vZGVsOiBtZW1iZXIubW9kZWwsXHJcbiAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2UuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCBcIlwiLFxyXG4gICAgICAgICAgdG9rZW5zOiB7XHJcbiAgICAgICAgICAgIHByb21wdDogcmVzcG9uc2UudXNhZ2UucHJvbXB0X3Rva2VucyxcclxuICAgICAgICAgICAgY29tcGxldGlvbjogcmVzcG9uc2UudXNhZ2UuY29tcGxldGlvbl90b2tlbnMsXHJcbiAgICAgICAgICAgIHRvdGFsOiByZXNwb25zZS51c2FnZS50b3RhbF90b2tlbnMsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcXVlcnlpbmcgJHttZW1iZXIubmFtZX06YCwgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBtZW1iZXI6IG1lbWJlci5uYW1lLFxyXG4gICAgICAgICAgbW9kZWw6IG1lbWJlci5tb2RlbCxcclxuICAgICAgICAgIHJlc3BvbnNlOiBgRXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIn1gLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0OiBDb3VuY2lsUmVzdWx0ID0ge1xyXG4gICAgcHJvbXB0OiByZXF1ZXN0LnByb21wdCxcclxuICAgIHJlc3BvbnNlcyxcclxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gIH07XHJcblxyXG4gIC8vIE9wdGlvbmFsbHkgZ2VuZXJhdGUgY29uc2Vuc3VzXHJcbiAgaWYgKHJlc3BvbnNlcy5ldmVyeSgocikgPT4gIXIucmVzcG9uc2Uuc3RhcnRzV2l0aChcIkVycm9yXCIpKSkge1xyXG4gICAgcmVzdWx0LmNvbnNlbnN1cyA9IGF3YWl0IGdlbmVyYXRlQ29uc2Vuc3VzKHJlc3BvbnNlcywgcmVxdWVzdCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICogR2VuZXJhdGUgY29uc2Vuc3VzIGZyb20gY291bmNpbCByZXNwb25zZXNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ29uc2Vuc3VzKFxyXG4gIHJlc3BvbnNlczogQ291bmNpbFJlc3BvbnNlW10sXHJcbiAgb3JpZ2luYWxSZXF1ZXN0OiBDb3VuY2lsUmVxdWVzdFxyXG4pOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIGNvbnN0IHJlc3BvbnNlc1RleHQgPSByZXNwb25zZXNcclxuICAgIC5tYXAoKHIpID0+IGAke3IubWVtYmVyfTogJHtyLnJlc3BvbnNlfWApXHJcbiAgICAuam9pbihcIlxcblxcblwiKTtcclxuXHJcbiAgY29uc3QgY29uc2Vuc3VzUHJvbXB0ID0gYFlvdSBhcmUgc3ludGhlc2l6aW5nIHBlcnNwZWN0aXZlcyBmcm9tIG11bHRpcGxlIEFJIGFkdmlzb3JzLiBSZXZpZXcgdGhlaXIgcmVzcG9uc2VzIGFuZCBwcm92aWRlIGEgYmFsYW5jZWQgY29uc2Vuc3VzIHRoYXQgaW5jb3Jwb3JhdGVzIHRoZSBiZXN0IGluc2lnaHRzIGZyb20gZWFjaC5cclxuXHJcblJlc3BvbnNlczpcclxuJHtyZXNwb25zZXNUZXh0fVxyXG5cclxuUHJvdmlkZSBhIGNvbmNpc2UgY29uc2Vuc3VzIHRoYXQgc3ludGhlc2l6ZXMgdGhlc2UgcGVyc3BlY3RpdmVzOmA7XHJcblxyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gYXdhaXQgZ2V0Q2hhdENvbXBsZXRpb24oXHJcbiAgICAgIE9QRU5ST1VURVJfTU9ERUxTLkNMQVVERSxcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxyXG4gICAgICAgICAgY29udGVudDogY29uc2Vuc3VzUHJvbXB0LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF0sXHJcbiAgICAgIHtcclxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6IFwiWW91IGFyZSBhbiBleHBlcnQgc3ludGhlc2l6ZXIgb2YgZGl2ZXJzZSBwZXJzcGVjdGl2ZXMuXCIsXHJcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuNixcclxuICAgICAgICBtYXhfdG9rZW5zOiBvcmlnaW5hbFJlcXVlc3QubWF4VG9rZW5zLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2VuZXJhdGluZyBjb25zZW5zdXM6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBcIkNvbnNlbnN1cyBnZW5lcmF0aW9uIGZhaWxlZFwiO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEJ1aWxkIGRlZmF1bHQgc3lzdGVtIHByb21wdCBmb3IgY291bmNpbFxyXG4gKi9cclxuZnVuY3Rpb24gYnVpbGREZWZhdWx0U3lzdGVtUHJvbXB0KG1lbWJlcnM6IENvdW5jaWxNZW1iZXJbXSk6IHN0cmluZyB7XHJcbiAgY29uc3QgbWVtYmVyTGlzdCA9IG1lbWJlcnNcclxuICAgIC5tYXAoKG0pID0+IGAke20ubmFtZX0gKCR7bS5yb2xlfSlgKVxyXG4gICAgLmpvaW4oXCIsIFwiKTtcclxuXHJcbiAgcmV0dXJuIGBZb3UgYXJlIHBhcnQgb2YgYW4gQUkgY291bmNpbCB3aXRoIHRoZSBmb2xsb3dpbmcgbWVtYmVyczogJHttZW1iZXJMaXN0fS4gRWFjaCBtZW1iZXIgcHJvdmlkZXMgdGhlaXIgdW5pcXVlIHBlcnNwZWN0aXZlLiBQcm92aWRlIHRob3VnaHRmdWwsIHdlbGwtcmVhc29uZWQgcmVzcG9uc2VzIHRoYXQgcmVmbGVjdCB5b3VyIHJvbGUgYW5kIGV4cGVydGlzZS5gO1xyXG59XHJcblxyXG4vKipcclxuICogUXVlcnkgYSBzaW5nbGUgY291bmNpbCBtZW1iZXJcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeU1lbWJlcihcclxuICBtZW1iZXI6IENvdW5jaWxNZW1iZXIsXHJcbiAgcHJvbXB0OiBzdHJpbmcsXHJcbiAgc3lzdGVtUHJvbXB0Pzogc3RyaW5nLFxyXG4gIG9wdGlvbnM/OiB7XHJcbiAgICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcclxuICAgIG1heFRva2Vucz86IG51bWJlcjtcclxuICB9XHJcbik6IFByb21pc2U8Q291bmNpbFJlc3BvbnNlPiB7XHJcbiAgY29uc3QgbWVzc2FnZXM6IE9wZW5Sb3V0ZXJNZXNzYWdlW10gPSBbXHJcbiAgICB7XHJcbiAgICAgIHJvbGU6IFwic3lzdGVtXCIsXHJcbiAgICAgIGNvbnRlbnQ6IHN5c3RlbVByb21wdCB8fCBgWW91IGFyZSAke21lbWJlci5uYW1lfSwgJHttZW1iZXIucm9sZX0uYCxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHJvbGU6IFwidXNlclwiLFxyXG4gICAgICBjb250ZW50OiBwcm9tcHQsXHJcbiAgICB9LFxyXG4gIF07XHJcblxyXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2FsbE9wZW5Sb3V0ZXIoe1xyXG4gICAgbW9kZWw6IG1lbWJlci5tb2RlbCxcclxuICAgIG1lc3NhZ2VzLFxyXG4gICAgdGVtcGVyYXR1cmU6IG9wdGlvbnM/LnRlbXBlcmF0dXJlID8/IG1lbWJlci50ZW1wZXJhdHVyZSA/PyAwLjcsXHJcbiAgICBtYXhfdG9rZW5zOiBvcHRpb25zPy5tYXhUb2tlbnMsXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBtZW1iZXI6IG1lbWJlci5uYW1lLFxyXG4gICAgbW9kZWw6IG1lbWJlci5tb2RlbCxcclxuICAgIHJlc3BvbnNlOiByZXNwb25zZS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50IHx8IFwiXCIsXHJcbiAgICB0b2tlbnM6IHtcclxuICAgICAgcHJvbXB0OiByZXNwb25zZS51c2FnZS5wcm9tcHRfdG9rZW5zLFxyXG4gICAgICBjb21wbGV0aW9uOiByZXNwb25zZS51c2FnZS5jb21wbGV0aW9uX3Rva2VucyxcclxuICAgICAgdG90YWw6IHJlc3BvbnNlLnVzYWdlLnRvdGFsX3Rva2VucyxcclxuICAgIH0sXHJcbiAgfTtcclxufVxyXG5cclxuIl0sIm5hbWVzIjpbImNhbGxPcGVuUm91dGVyIiwiZ2V0Q2hhdENvbXBsZXRpb24iLCJPUEVOUk9VVEVSX01PREVMUyIsIkRFRkFVTFRfQ09VTkNJTF9NRU1CRVJTIiwibW9kZWwiLCJERUVQU0VFSyIsIm5hbWUiLCJyb2xlIiwidGVtcGVyYXR1cmUiLCJDTEFVREUiLCJHTE0iLCJHRU1JTkkiLCJxdWVyeUNvdW5jaWwiLCJyZXF1ZXN0IiwibWVtYmVycyIsInN5c3RlbVByb21wdCIsImJ1aWxkRGVmYXVsdFN5c3RlbVByb21wdCIsInJlc3BvbnNlcyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJtZW1iZXIiLCJtZXNzYWdlcyIsImNvbnRlbnQiLCJwcm9tcHQiLCJyZXNwb25zZSIsIm1heF90b2tlbnMiLCJtYXhUb2tlbnMiLCJjaG9pY2VzIiwibWVzc2FnZSIsInRva2VucyIsInVzYWdlIiwicHJvbXB0X3Rva2VucyIsImNvbXBsZXRpb24iLCJjb21wbGV0aW9uX3Rva2VucyIsInRvdGFsIiwidG90YWxfdG9rZW5zIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJyZXN1bHQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJldmVyeSIsInIiLCJzdGFydHNXaXRoIiwiY29uc2Vuc3VzIiwiZ2VuZXJhdGVDb25zZW5zdXMiLCJvcmlnaW5hbFJlcXVlc3QiLCJyZXNwb25zZXNUZXh0Iiwiam9pbiIsImNvbnNlbnN1c1Byb21wdCIsIm1lbWJlckxpc3QiLCJtIiwicXVlcnlNZW1iZXIiLCJvcHRpb25zIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/aiCouncil.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/aiCouncil/logging.ts":
/*!**************************************!*\
  !*** ./src/lib/aiCouncil/logging.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   estimateCouncilCost: () => (/* binding */ estimateCouncilCost),\n/* harmony export */   logCouncilUsage: () => (/* binding */ logCouncilUsage)\n/* harmony export */ });\n/**\r\n * ============================================================\r\n * COUNCIL USAGE LOGGING\r\n * ============================================================\r\n * Tracks AI Council usage for cost monitoring and analytics\r\n */ /**\r\n * Log council usage\r\n */ async function logCouncilUsage(log) {\n    const timestamp = log.timestamp || Date.now();\n    const modelCount = log.responses.length;\n    const successfulResponses = log.responses.filter((r)=>!r.response.startsWith(\"Error\")).length;\n    // Console log for development/monitoring\n    if (log.error) {\n        console.error(` Council Error [${log.requestId}]: ${log.error}`);\n    } else {\n        console.log(` Council Usage [${log.requestId}]: ${modelCount} models | ${successfulResponses}/${modelCount} successful | Tokens: ${log.totalTokens} | Duration: ${log.duration}ms | Tier: ${log.tier || \"unknown\"}`);\n    }\n    // Structured logging for production\n    const logLine = JSON.stringify({\n        timestamp: new Date(timestamp).toISOString(),\n        type: \"council_usage\",\n        ...log\n    });\n    console.log(`[COUNCIL-USAGE] ${logLine}`);\n// TODO: Integrate with Supabase or external analytics if needed\n// For now, console logs are captured by Railway/Vercel\n}\n/**\r\n * Calculate estimated cost for council query\r\n * Based on OpenRouter pricing (approximate)\r\n */ function estimateCouncilCost(responses) {\n    // Approximate costs per 1M tokens (as of 2024)\n    const modelCosts = {\n        \"deepseek/deepseek-chat\": {\n            input: 0.14,\n            output: 0.28\n        },\n        \"anthropic/claude-3.5-sonnet\": {\n            input: 3.0,\n            output: 15.0\n        },\n        \"zhipu/glm-4.7\": {\n            input: 0.1,\n            output: 0.1\n        },\n        \"google/gemini-2.0-flash\": {\n            input: 0.075,\n            output: 0.3\n        }\n    };\n    let totalCost = 0;\n    for (const response of responses){\n        if (!response.tokens) continue;\n        const costs = modelCosts[response.model] || {\n            input: 1.0,\n            output: 2.0\n        };\n        const inputCost = response.tokens.prompt / 1000000 * costs.input;\n        const outputCost = response.tokens.completion / 1000000 * costs.output;\n        totalCost += inputCost + outputCost;\n    }\n    return totalCost;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FpQ291bmNpbC9sb2dnaW5nLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7Ozs7O0NBS0MsR0FpQkQ7O0NBRUMsR0FDTSxlQUFlQSxnQkFBZ0JDLEdBQW9CO0lBQ3hELE1BQU1DLFlBQVlELElBQUlDLFNBQVMsSUFBSUMsS0FBS0MsR0FBRztJQUMzQyxNQUFNQyxhQUFhSixJQUFJSyxTQUFTLENBQUNDLE1BQU07SUFDdkMsTUFBTUMsc0JBQXNCUCxJQUFJSyxTQUFTLENBQUNHLE1BQU0sQ0FBQyxDQUFDQyxJQUFNLENBQUNBLEVBQUVDLFFBQVEsQ0FBQ0MsVUFBVSxDQUFDLFVBQVVMLE1BQU07SUFFL0YseUNBQXlDO0lBQ3pDLElBQUlOLElBQUlZLEtBQUssRUFBRTtRQUNiQyxRQUFRRCxLQUFLLENBQUMsQ0FBQyxpQkFBaUIsRUFBRVosSUFBSWMsU0FBUyxDQUFDLEdBQUcsRUFBRWQsSUFBSVksS0FBSyxFQUFFO0lBQ2xFLE9BQU87UUFDTEMsUUFBUWIsR0FBRyxDQUNULENBQUMsa0JBQWtCLEVBQUVBLElBQUljLFNBQVMsQ0FBQyxHQUFHLEVBQUVWLFdBQVcsVUFBVSxFQUFFRyxvQkFBb0IsQ0FBQyxFQUFFSCxXQUFXLHNCQUFzQixFQUFFSixJQUFJZSxXQUFXLENBQUMsYUFBYSxFQUFFZixJQUFJZ0IsUUFBUSxDQUFDLFdBQVcsRUFBRWhCLElBQUlpQixJQUFJLElBQUksV0FBVztJQUU3TTtJQUVBLG9DQUFvQztJQUNwQyxNQUFNQyxVQUFVQyxLQUFLQyxTQUFTLENBQUM7UUFDN0JuQixXQUFXLElBQUlDLEtBQUtELFdBQVdvQixXQUFXO1FBQzFDQyxNQUFNO1FBQ04sR0FBR3RCLEdBQUc7SUFDUjtJQUVBYSxRQUFRYixHQUFHLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRWtCLFNBQVM7QUFFeEMsZ0VBQWdFO0FBQ2hFLHVEQUF1RDtBQUN6RDtBQUVBOzs7Q0FHQyxHQUNNLFNBQVNLLG9CQUFvQmxCLFNBQTRCO0lBQzlELCtDQUErQztJQUMvQyxNQUFNbUIsYUFBZ0U7UUFDcEUsMEJBQTBCO1lBQUVDLE9BQU87WUFBTUMsUUFBUTtRQUFLO1FBQ3RELCtCQUErQjtZQUFFRCxPQUFPO1lBQUtDLFFBQVE7UUFBSztRQUMxRCxpQkFBaUI7WUFBRUQsT0FBTztZQUFLQyxRQUFRO1FBQUk7UUFDM0MsMkJBQTJCO1lBQUVELE9BQU87WUFBT0MsUUFBUTtRQUFJO0lBQ3pEO0lBRUEsSUFBSUMsWUFBWTtJQUVoQixLQUFLLE1BQU1qQixZQUFZTCxVQUFXO1FBQ2hDLElBQUksQ0FBQ0ssU0FBU2tCLE1BQU0sRUFBRTtRQUV0QixNQUFNQyxRQUFRTCxVQUFVLENBQUNkLFNBQVNvQixLQUFLLENBQUMsSUFBSTtZQUFFTCxPQUFPO1lBQUtDLFFBQVE7UUFBSTtRQUN0RSxNQUFNSyxZQUFZLFNBQVVILE1BQU0sQ0FBQ0ksTUFBTSxHQUFHLFVBQWFILE1BQU1KLEtBQUs7UUFDcEUsTUFBTVEsYUFBYSxTQUFVTCxNQUFNLENBQUNNLFVBQVUsR0FBRyxVQUFhTCxNQUFNSCxNQUFNO1FBQzFFQyxhQUFhSSxZQUFZRTtJQUMzQjtJQUVBLE9BQU9OO0FBQ1QiLCJzb3VyY2VzIjpbIkM6XFxQcm9qZWN0c1xcU3lucXJhXFxhcHBzXFxzeW5xcmEtbXZwXFxzcmNcXGxpYlxcYWlDb3VuY2lsXFxsb2dnaW5nLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogQ09VTkNJTCBVU0FHRSBMT0dHSU5HXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiBUcmFja3MgQUkgQ291bmNpbCB1c2FnZSBmb3IgY29zdCBtb25pdG9yaW5nIGFuZCBhbmFseXRpY3NcclxuICovXHJcblxyXG5pbXBvcnQgdHlwZSB7IENvdW5jaWxSZXNwb25zZSB9IGZyb20gXCIuLi9haUNvdW5jaWxcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ291bmNpbFVzYWdlTG9nIHtcclxuICByZXF1ZXN0SWQ6IHN0cmluZztcclxuICBwcm9tcHQ6IHN0cmluZztcclxuICByZXNwb25zZXM6IENvdW5jaWxSZXNwb25zZVtdO1xyXG4gIHRvdGFsVG9rZW5zOiBudW1iZXI7XHJcbiAgdG90YWxQcm9tcHRUb2tlbnM6IG51bWJlcjtcclxuICB0b3RhbENvbXBsZXRpb25Ub2tlbnM6IG51bWJlcjtcclxuICBkdXJhdGlvbjogbnVtYmVyO1xyXG4gIHRpZXI/OiBzdHJpbmc7XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbiAgdGltZXN0YW1wPzogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogTG9nIGNvdW5jaWwgdXNhZ2VcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dDb3VuY2lsVXNhZ2UobG9nOiBDb3VuY2lsVXNhZ2VMb2cpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBjb25zdCB0aW1lc3RhbXAgPSBsb2cudGltZXN0YW1wIHx8IERhdGUubm93KCk7XHJcbiAgY29uc3QgbW9kZWxDb3VudCA9IGxvZy5yZXNwb25zZXMubGVuZ3RoO1xyXG4gIGNvbnN0IHN1Y2Nlc3NmdWxSZXNwb25zZXMgPSBsb2cucmVzcG9uc2VzLmZpbHRlcigocikgPT4gIXIucmVzcG9uc2Uuc3RhcnRzV2l0aChcIkVycm9yXCIpKS5sZW5ndGg7XHJcblxyXG4gIC8vIENvbnNvbGUgbG9nIGZvciBkZXZlbG9wbWVudC9tb25pdG9yaW5nXHJcbiAgaWYgKGxvZy5lcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihg4p2MIENvdW5jaWwgRXJyb3IgWyR7bG9nLnJlcXVlc3RJZH1dOiAke2xvZy5lcnJvcn1gKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coXHJcbiAgICAgIGDwn5OKIENvdW5jaWwgVXNhZ2UgWyR7bG9nLnJlcXVlc3RJZH1dOiAke21vZGVsQ291bnR9IG1vZGVscyB8ICR7c3VjY2Vzc2Z1bFJlc3BvbnNlc30vJHttb2RlbENvdW50fSBzdWNjZXNzZnVsIHwgVG9rZW5zOiAke2xvZy50b3RhbFRva2Vuc30gfCBEdXJhdGlvbjogJHtsb2cuZHVyYXRpb259bXMgfCBUaWVyOiAke2xvZy50aWVyIHx8IFwidW5rbm93blwifWBcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBTdHJ1Y3R1cmVkIGxvZ2dpbmcgZm9yIHByb2R1Y3Rpb25cclxuICBjb25zdCBsb2dMaW5lID0gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSh0aW1lc3RhbXApLnRvSVNPU3RyaW5nKCksXHJcbiAgICB0eXBlOiBcImNvdW5jaWxfdXNhZ2VcIixcclxuICAgIC4uLmxvZyxcclxuICB9KTtcclxuXHJcbiAgY29uc29sZS5sb2coYFtDT1VOQ0lMLVVTQUdFXSAke2xvZ0xpbmV9YCk7XHJcblxyXG4gIC8vIFRPRE86IEludGVncmF0ZSB3aXRoIFN1cGFiYXNlIG9yIGV4dGVybmFsIGFuYWx5dGljcyBpZiBuZWVkZWRcclxuICAvLyBGb3Igbm93LCBjb25zb2xlIGxvZ3MgYXJlIGNhcHR1cmVkIGJ5IFJhaWx3YXkvVmVyY2VsXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgZXN0aW1hdGVkIGNvc3QgZm9yIGNvdW5jaWwgcXVlcnlcclxuICogQmFzZWQgb24gT3BlblJvdXRlciBwcmljaW5nIChhcHByb3hpbWF0ZSlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBlc3RpbWF0ZUNvdW5jaWxDb3N0KHJlc3BvbnNlczogQ291bmNpbFJlc3BvbnNlW10pOiBudW1iZXIge1xyXG4gIC8vIEFwcHJveGltYXRlIGNvc3RzIHBlciAxTSB0b2tlbnMgKGFzIG9mIDIwMjQpXHJcbiAgY29uc3QgbW9kZWxDb3N0czogUmVjb3JkPHN0cmluZywgeyBpbnB1dDogbnVtYmVyOyBvdXRwdXQ6IG51bWJlciB9PiA9IHtcclxuICAgIFwiZGVlcHNlZWsvZGVlcHNlZWstY2hhdFwiOiB7IGlucHV0OiAwLjE0LCBvdXRwdXQ6IDAuMjggfSxcclxuICAgIFwiYW50aHJvcGljL2NsYXVkZS0zLjUtc29ubmV0XCI6IHsgaW5wdXQ6IDMuMCwgb3V0cHV0OiAxNS4wIH0sXHJcbiAgICBcInpoaXB1L2dsbS00LjdcIjogeyBpbnB1dDogMC4xLCBvdXRwdXQ6IDAuMSB9LFxyXG4gICAgXCJnb29nbGUvZ2VtaW5pLTIuMC1mbGFzaFwiOiB7IGlucHV0OiAwLjA3NSwgb3V0cHV0OiAwLjMgfSxcclxuICB9O1xyXG5cclxuICBsZXQgdG90YWxDb3N0ID0gMDtcclxuXHJcbiAgZm9yIChjb25zdCByZXNwb25zZSBvZiByZXNwb25zZXMpIHtcclxuICAgIGlmICghcmVzcG9uc2UudG9rZW5zKSBjb250aW51ZTtcclxuXHJcbiAgICBjb25zdCBjb3N0cyA9IG1vZGVsQ29zdHNbcmVzcG9uc2UubW9kZWxdIHx8IHsgaW5wdXQ6IDEuMCwgb3V0cHV0OiAyLjAgfTtcclxuICAgIGNvbnN0IGlucHV0Q29zdCA9IChyZXNwb25zZS50b2tlbnMucHJvbXB0IC8gMV8wMDBfMDAwKSAqIGNvc3RzLmlucHV0O1xyXG4gICAgY29uc3Qgb3V0cHV0Q29zdCA9IChyZXNwb25zZS50b2tlbnMuY29tcGxldGlvbiAvIDFfMDAwXzAwMCkgKiBjb3N0cy5vdXRwdXQ7XHJcbiAgICB0b3RhbENvc3QgKz0gaW5wdXRDb3N0ICsgb3V0cHV0Q29zdDtcclxuICB9XHJcblxyXG4gIHJldHVybiB0b3RhbENvc3Q7XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJsb2dDb3VuY2lsVXNhZ2UiLCJsb2ciLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwibW9kZWxDb3VudCIsInJlc3BvbnNlcyIsImxlbmd0aCIsInN1Y2Nlc3NmdWxSZXNwb25zZXMiLCJmaWx0ZXIiLCJyIiwicmVzcG9uc2UiLCJzdGFydHNXaXRoIiwiZXJyb3IiLCJjb25zb2xlIiwicmVxdWVzdElkIiwidG90YWxUb2tlbnMiLCJkdXJhdGlvbiIsInRpZXIiLCJsb2dMaW5lIiwiSlNPTiIsInN0cmluZ2lmeSIsInRvSVNPU3RyaW5nIiwidHlwZSIsImVzdGltYXRlQ291bmNpbENvc3QiLCJtb2RlbENvc3RzIiwiaW5wdXQiLCJvdXRwdXQiLCJ0b3RhbENvc3QiLCJ0b2tlbnMiLCJjb3N0cyIsIm1vZGVsIiwiaW5wdXRDb3N0IiwicHJvbXB0Iiwib3V0cHV0Q29zdCIsImNvbXBsZXRpb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/aiCouncil/logging.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/openrouter.ts":
/*!*******************************!*\
  !*** ./src/lib/openrouter.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OPENROUTER_MODELS: () => (/* binding */ OPENROUTER_MODELS),\n/* harmony export */   callOpenRouter: () => (/* binding */ callOpenRouter),\n/* harmony export */   getChatCompletion: () => (/* binding */ getChatCompletion)\n/* harmony export */ });\n/**\r\n * ============================================================\r\n * OPENROUTER CLIENT\r\n * ============================================================\r\n * Client for interacting with OpenRouter API\r\n * Supports multiple AI models through a unified interface\r\n */ const OPENROUTER_API_URL = \"https://openrouter.ai/api/v1/chat/completions\";\nconst OPENROUTER_API_KEY = process.env.OPENROUTER_API_KEY;\n/**\r\n * Make a request to OpenRouter API\r\n */ async function callOpenRouter(request) {\n    if (!OPENROUTER_API_KEY) {\n        throw new Error(\"OPENROUTER_API_KEY environment variable is not set\");\n    }\n    const response = await fetch(OPENROUTER_API_URL, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${OPENROUTER_API_KEY}`,\n            \"HTTP-Referer\": process.env.OPENROUTER_HTTP_REFERER || \"\",\n            \"X-Title\": process.env.OPENROUTER_X_TITLE || \"Synqra MVP\"\n        },\n        body: JSON.stringify({\n            model: request.model,\n            messages: request.messages,\n            temperature: request.temperature ?? 0.7,\n            max_tokens: request.max_tokens,\n            top_p: request.top_p,\n            frequency_penalty: request.frequency_penalty,\n            presence_penalty: request.presence_penalty\n        })\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(`OpenRouter API error: ${error.error.message} (${error.error.type})`);\n    }\n    return response.json();\n}\n/**\r\n * Convenience function to get a chat completion\r\n */ async function getChatCompletion(model, messages, options) {\n    const requestMessages = options?.systemPrompt ? [\n        {\n            role: \"system\",\n            content: options.systemPrompt\n        },\n        ...messages\n    ] : messages;\n    const response = await callOpenRouter({\n        model,\n        messages: requestMessages,\n        temperature: options?.temperature,\n        max_tokens: options?.max_tokens\n    });\n    return response.choices[0]?.message?.content || \"\";\n}\n/**\r\n * Supported models\r\n */ const OPENROUTER_MODELS = {\n    DEEPSEEK: \"deepseek/deepseek-chat\",\n    CLAUDE: \"anthropic/claude-3.5-sonnet\",\n    GLM: \"zhipu/glm-4.7\",\n    GEMINI: \"google/gemini-2.0-flash\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL29wZW5yb3V0ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7OztDQU1DLEdBeUNELE1BQU1BLHFCQUFxQjtBQUMzQixNQUFNQyxxQkFBcUJDLFFBQVFDLEdBQUcsQ0FBQ0Ysa0JBQWtCO0FBRXpEOztDQUVDLEdBQ00sZUFBZUcsZUFDcEJDLE9BQTBCO0lBRTFCLElBQUksQ0FBQ0osb0JBQW9CO1FBQ3ZCLE1BQU0sSUFBSUssTUFBTTtJQUNsQjtJQUVBLE1BQU1DLFdBQVcsTUFBTUMsTUFBTVIsb0JBQW9CO1FBQy9DUyxRQUFRO1FBQ1JDLFNBQVM7WUFDUCxnQkFBZ0I7WUFDaEJDLGVBQWUsQ0FBQyxPQUFPLEVBQUVWLG9CQUFvQjtZQUM3QyxnQkFBZ0JDLFFBQVFDLEdBQUcsQ0FBQ1MsdUJBQXVCLElBQUk7WUFDdkQsV0FBV1YsUUFBUUMsR0FBRyxDQUFDVSxrQkFBa0IsSUFBSTtRQUMvQztRQUNBQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7WUFDbkJDLE9BQU9aLFFBQVFZLEtBQUs7WUFDcEJDLFVBQVViLFFBQVFhLFFBQVE7WUFDMUJDLGFBQWFkLFFBQVFjLFdBQVcsSUFBSTtZQUNwQ0MsWUFBWWYsUUFBUWUsVUFBVTtZQUM5QkMsT0FBT2hCLFFBQVFnQixLQUFLO1lBQ3BCQyxtQkFBbUJqQixRQUFRaUIsaUJBQWlCO1lBQzVDQyxrQkFBa0JsQixRQUFRa0IsZ0JBQWdCO1FBQzVDO0lBQ0Y7SUFFQSxJQUFJLENBQUNoQixTQUFTaUIsRUFBRSxFQUFFO1FBQ2hCLE1BQU1DLFFBQXlCLE1BQU1sQixTQUFTbUIsSUFBSTtRQUNsRCxNQUFNLElBQUlwQixNQUNSLENBQUMsc0JBQXNCLEVBQUVtQixNQUFNQSxLQUFLLENBQUNFLE9BQU8sQ0FBQyxFQUFFLEVBQUVGLE1BQU1BLEtBQUssQ0FBQ0csSUFBSSxDQUFDLENBQUMsQ0FBQztJQUV4RTtJQUVBLE9BQU9yQixTQUFTbUIsSUFBSTtBQUN0QjtBQUVBOztDQUVDLEdBQ00sZUFBZUcsa0JBQ3BCWixLQUFhLEVBQ2JDLFFBQTZCLEVBQzdCWSxPQUlDO0lBRUQsTUFBTUMsa0JBQXVDRCxTQUFTRSxlQUNsRDtRQUFDO1lBQUVDLE1BQU07WUFBVUMsU0FBU0osUUFBUUUsWUFBWTtRQUFDO1dBQU1kO0tBQVMsR0FDaEVBO0lBRUosTUFBTVgsV0FBVyxNQUFNSCxlQUFlO1FBQ3BDYTtRQUNBQyxVQUFVYTtRQUNWWixhQUFhVyxTQUFTWDtRQUN0QkMsWUFBWVUsU0FBU1Y7SUFDdkI7SUFFQSxPQUFPYixTQUFTNEIsT0FBTyxDQUFDLEVBQUUsRUFBRVIsU0FBU08sV0FBVztBQUNsRDtBQUVBOztDQUVDLEdBQ00sTUFBTUUsb0JBQW9CO0lBQy9CQyxVQUFVO0lBQ1ZDLFFBQVE7SUFDUkMsS0FBSztJQUNMQyxRQUFRO0FBQ1YsRUFBVyIsInNvdXJjZXMiOlsiQzpcXFByb2plY3RzXFxTeW5xcmFcXGFwcHNcXHN5bnFyYS1tdnBcXHNyY1xcbGliXFxvcGVucm91dGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogT1BFTlJPVVRFUiBDTElFTlRcclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqIENsaWVudCBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBPcGVuUm91dGVyIEFQSVxyXG4gKiBTdXBwb3J0cyBtdWx0aXBsZSBBSSBtb2RlbHMgdGhyb3VnaCBhIHVuaWZpZWQgaW50ZXJmYWNlXHJcbiAqL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBPcGVuUm91dGVyTWVzc2FnZSB7XHJcbiAgcm9sZTogXCJzeXN0ZW1cIiB8IFwidXNlclwiIHwgXCJhc3Npc3RhbnRcIjtcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgT3BlblJvdXRlclJlcXVlc3Qge1xyXG4gIG1vZGVsOiBzdHJpbmc7XHJcbiAgbWVzc2FnZXM6IE9wZW5Sb3V0ZXJNZXNzYWdlW107XHJcbiAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XHJcbiAgbWF4X3Rva2Vucz86IG51bWJlcjtcclxuICB0b3BfcD86IG51bWJlcjtcclxuICBmcmVxdWVuY3lfcGVuYWx0eT86IG51bWJlcjtcclxuICBwcmVzZW5jZV9wZW5hbHR5PzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE9wZW5Sb3V0ZXJSZXNwb25zZSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBtb2RlbDogc3RyaW5nO1xyXG4gIGNyZWF0ZWQ6IG51bWJlcjtcclxuICBjaG9pY2VzOiBBcnJheTx7XHJcbiAgICBpbmRleDogbnVtYmVyO1xyXG4gICAgbWVzc2FnZTogT3BlblJvdXRlck1lc3NhZ2U7XHJcbiAgICBmaW5pc2hfcmVhc29uOiBzdHJpbmc7XHJcbiAgfT47XHJcbiAgdXNhZ2U6IHtcclxuICAgIHByb21wdF90b2tlbnM6IG51bWJlcjtcclxuICAgIGNvbXBsZXRpb25fdG9rZW5zOiBudW1iZXI7XHJcbiAgICB0b3RhbF90b2tlbnM6IG51bWJlcjtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE9wZW5Sb3V0ZXJFcnJvciB7XHJcbiAgZXJyb3I6IHtcclxuICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgIHR5cGU6IHN0cmluZztcclxuICAgIGNvZGU/OiBudW1iZXI7XHJcbiAgfTtcclxufVxyXG5cclxuY29uc3QgT1BFTlJPVVRFUl9BUElfVVJMID0gXCJodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxL2NoYXQvY29tcGxldGlvbnNcIjtcclxuY29uc3QgT1BFTlJPVVRFUl9BUElfS0VZID0gcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9BUElfS0VZO1xyXG5cclxuLyoqXHJcbiAqIE1ha2UgYSByZXF1ZXN0IHRvIE9wZW5Sb3V0ZXIgQVBJXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FsbE9wZW5Sb3V0ZXIoXHJcbiAgcmVxdWVzdDogT3BlblJvdXRlclJlcXVlc3RcclxuKTogUHJvbWlzZTxPcGVuUm91dGVyUmVzcG9uc2U+IHtcclxuICBpZiAoIU9QRU5ST1VURVJfQVBJX0tFWSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiT1BFTlJPVVRFUl9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG5vdCBzZXRcIik7XHJcbiAgfVxyXG5cclxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKE9QRU5ST1VURVJfQVBJX1VSTCwge1xyXG4gICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtPUEVOUk9VVEVSX0FQSV9LRVl9YCxcclxuICAgICAgXCJIVFRQLVJlZmVyZXJcIjogcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9IVFRQX1JFRkVSRVIgfHwgXCJcIixcclxuICAgICAgXCJYLVRpdGxlXCI6IHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfWF9USVRMRSB8fCBcIlN5bnFyYSBNVlBcIixcclxuICAgIH0sXHJcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgIG1vZGVsOiByZXF1ZXN0Lm1vZGVsLFxyXG4gICAgICBtZXNzYWdlczogcmVxdWVzdC5tZXNzYWdlcyxcclxuICAgICAgdGVtcGVyYXR1cmU6IHJlcXVlc3QudGVtcGVyYXR1cmUgPz8gMC43LFxyXG4gICAgICBtYXhfdG9rZW5zOiByZXF1ZXN0Lm1heF90b2tlbnMsXHJcbiAgICAgIHRvcF9wOiByZXF1ZXN0LnRvcF9wLFxyXG4gICAgICBmcmVxdWVuY3lfcGVuYWx0eTogcmVxdWVzdC5mcmVxdWVuY3lfcGVuYWx0eSxcclxuICAgICAgcHJlc2VuY2VfcGVuYWx0eTogcmVxdWVzdC5wcmVzZW5jZV9wZW5hbHR5LFxyXG4gICAgfSksXHJcbiAgfSk7XHJcblxyXG4gIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgIGNvbnN0IGVycm9yOiBPcGVuUm91dGVyRXJyb3IgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgIGBPcGVuUm91dGVyIEFQSSBlcnJvcjogJHtlcnJvci5lcnJvci5tZXNzYWdlfSAoJHtlcnJvci5lcnJvci50eXBlfSlgXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIHRvIGdldCBhIGNoYXQgY29tcGxldGlvblxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENoYXRDb21wbGV0aW9uKFxyXG4gIG1vZGVsOiBzdHJpbmcsXHJcbiAgbWVzc2FnZXM6IE9wZW5Sb3V0ZXJNZXNzYWdlW10sXHJcbiAgb3B0aW9ucz86IHtcclxuICAgIHRlbXBlcmF0dXJlPzogbnVtYmVyO1xyXG4gICAgbWF4X3Rva2Vucz86IG51bWJlcjtcclxuICAgIHN5c3RlbVByb21wdD86IHN0cmluZztcclxuICB9XHJcbik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgY29uc3QgcmVxdWVzdE1lc3NhZ2VzOiBPcGVuUm91dGVyTWVzc2FnZVtdID0gb3B0aW9ucz8uc3lzdGVtUHJvbXB0XHJcbiAgICA/IFt7IHJvbGU6IFwic3lzdGVtXCIsIGNvbnRlbnQ6IG9wdGlvbnMuc3lzdGVtUHJvbXB0IH0sIC4uLm1lc3NhZ2VzXVxyXG4gICAgOiBtZXNzYWdlcztcclxuXHJcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjYWxsT3BlblJvdXRlcih7XHJcbiAgICBtb2RlbCxcclxuICAgIG1lc3NhZ2VzOiByZXF1ZXN0TWVzc2FnZXMsXHJcbiAgICB0ZW1wZXJhdHVyZTogb3B0aW9ucz8udGVtcGVyYXR1cmUsXHJcbiAgICBtYXhfdG9rZW5zOiBvcHRpb25zPy5tYXhfdG9rZW5zLFxyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gcmVzcG9uc2UuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCBcIlwiO1xyXG59XHJcblxyXG4vKipcclxuICogU3VwcG9ydGVkIG1vZGVsc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE9QRU5ST1VURVJfTU9ERUxTID0ge1xyXG4gIERFRVBTRUVLOiBcImRlZXBzZWVrL2RlZXBzZWVrLWNoYXRcIixcclxuICBDTEFVREU6IFwiYW50aHJvcGljL2NsYXVkZS0zLjUtc29ubmV0XCIsXHJcbiAgR0xNOiBcInpoaXB1L2dsbS00LjdcIixcclxuICBHRU1JTkk6IFwiZ29vZ2xlL2dlbWluaS0yLjAtZmxhc2hcIixcclxufSBhcyBjb25zdDtcclxuXHJcbmV4cG9ydCB0eXBlIE9wZW5Sb3V0ZXJNb2RlbCA9XHJcbiAgKHR5cGVvZiBPUEVOUk9VVEVSX01PREVMUylba2V5b2YgdHlwZW9mIE9QRU5ST1VURVJfTU9ERUxTXTtcclxuXHJcbiJdLCJuYW1lcyI6WyJPUEVOUk9VVEVSX0FQSV9VUkwiLCJPUEVOUk9VVEVSX0FQSV9LRVkiLCJwcm9jZXNzIiwiZW52IiwiY2FsbE9wZW5Sb3V0ZXIiLCJyZXF1ZXN0IiwiRXJyb3IiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJPUEVOUk9VVEVSX0hUVFBfUkVGRVJFUiIsIk9QRU5ST1VURVJfWF9USVRMRSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibW9kZWwiLCJtZXNzYWdlcyIsInRlbXBlcmF0dXJlIiwibWF4X3Rva2VucyIsInRvcF9wIiwiZnJlcXVlbmN5X3BlbmFsdHkiLCJwcmVzZW5jZV9wZW5hbHR5Iiwib2siLCJlcnJvciIsImpzb24iLCJtZXNzYWdlIiwidHlwZSIsImdldENoYXRDb21wbGV0aW9uIiwib3B0aW9ucyIsInJlcXVlc3RNZXNzYWdlcyIsInN5c3RlbVByb21wdCIsInJvbGUiLCJjb250ZW50IiwiY2hvaWNlcyIsIk9QRU5ST1VURVJfTU9ERUxTIiwiREVFUFNFRUsiLCJDTEFVREUiLCJHTE0iLCJHRU1JTkkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/openrouter.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/disposable-email-domains"], () => (__webpack_exec__("(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcouncil%2Froute&page=%2Fapi%2Fcouncil%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcouncil%2Froute.ts&appDir=C%3A%5CProjects%5CSynqra%5Capps%5Csynqra-mvp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CProjects%5CSynqra%5Capps%5Csynqra-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();