(()=>{var e={};e.id=2225,e.ids=[2225,4291],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5489:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>E,serverHooks:()=>f,workAsyncStorage:()=>S,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>d,POST:()=>c});var a=r(1271),n=r(1232),o=r(8079),i=r(1238),u=r(2892);let l=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;function p(e){let t=String(e?.message||""),r=String(e?.details||"");return t.includes("fetch failed")||r.includes("fetch failed")||r.includes("getaddrinfo ENOTFOUND")||r.includes("ENOTFOUND")||r.includes("ECONNREFUSED")||r.includes("ETIMEDOUT")}async function c(e){try{let t;let{email:r,full_name:s}=await e.json();if(!r||"string"!=typeof r)return i.NextResponse.json({ok:!1,error:"Email is required"},{status:400});let a=r.trim().toLowerCase();if(!l.test(a))return i.NextResponse.json({ok:!1,error:"Invalid email format"},{status:400});try{t=(0,u.H)()}catch(e){return i.NextResponse.json({ok:!1,error:"supabase_not_configured",message:"Service unavailable. Please try again later."},{status:503})}let{data:n,error:o}=await t.from("waitlist").insert([{email:a,full_name:s?.trim()||null,metadata:{source:"web",user_agent:e.headers.get("user-agent")||"unknown",timestamp:new Date().toISOString()}}]).select();if(o){if("23505"===o.code)return i.NextResponse.json({ok:!1,error:"already_registered",message:"This email is already on the waitlist"},{status:409});return console.error("[Waitlist API] Supabase insert error:",o),i.NextResponse.json({ok:!1,error:p(o)?"supabase_unreachable":"database_error",message:"Database error. Please try again."},{status:p(o)?503:500})}return console.log("[Waitlist API] New signup:",a),i.NextResponse.json({ok:!0,data:n,message:"Successfully joined waitlist"})}catch(e){return console.error("[Waitlist API] Unexpected error:",e),i.NextResponse.json({ok:!1,error:"Invalid request"},{status:400})}}async function d(){return i.NextResponse.json({error:"Endpoint disabled",message:"Social proof counts are not exposed"},{status:410})}let E=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/waitlist/route",pathname:"/api/waitlist",filename:"route",bundlePath:"app/api/waitlist/route"},resolvedPagePath:"C:\\Projects\\Synqra\\apps\\synqra-mvp\\app\\api\\waitlist\\route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:S,workUnitAsyncStorage:m,serverHooks:f}=E;function g(){return(0,o.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:m})}},7032:()=>{},408:()=>{},2892:(e,t,r)=>{"use strict";r.d(t,{H:()=>i});var s=r(1525),a=r(4291);let n=null,o=null;try{let e=(0,a.getSupabaseUrl)(),t=(0,a.F)();n=(0,s.createClient)(e,t,{auth:{persistSession:!1,autoRefreshToken:!1},db:{schema:"public"}})}catch(e){o=e instanceof Error?e:Error("Unknown Supabase admin init error"),n=null}function i(){if(!n)throw Error("âŒ Supabase Admin client not available. Ensure SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY are set in Railway Variables and restart."+(o?` Details: ${o.message}`:""));return n}},4291:(e,t,r)=>{"use strict";r.d(t,{F:()=>i,getSupabaseAnonKey:()=>o,getSupabaseUrl:()=>n});let s=["SUPABASE_SERVICE_KEY","SUPABASE_SERVICE_ROLE"];function a(e,t){if(!e||""===e.trim())throw Error(`[Supabase Env] ${t} is missing or empty`);return e}function n(){let e=a(process.env.SUPABASE_URL,"SUPABASE_URL");return function(e,t){try{let r=new URL(e);if("http:"!==r.protocol&&"https:"!==r.protocol)throw Error(`[Supabase Env] ${t} must start with http:// or https://`)}catch(e){throw Error(`[Supabase Env] ${t} is invalid: ${e instanceof Error?e.message:"Unknown URL error"}`)}}(e,"SUPABASE_URL"),e}function o(){return a(process.env.SUPABASE_ANON_KEY,"SUPABASE_ANON_KEY")}function i(){let e=process.env.SUPABASE_SERVICE_ROLE_KEY;if(e&&""!==e.trim())return e;for(let e of s){let t=process.env[e];if(t&&""!==t.trim())return console.warn(`[Supabase Env] Falling back to ${e}. Set SUPABASE_SERVICE_ROLE_KEY and restart.`),t}throw Error("[Supabase Env] SUPABASE_SERVICE_ROLE_KEY is missing or empty")}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[6207,8048,1525],()=>r(5489));module.exports=s})();