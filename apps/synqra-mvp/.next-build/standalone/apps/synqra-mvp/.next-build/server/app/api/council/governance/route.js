(()=>{var e={};e.id=4702,e.ids=[4291,4702],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5385:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>A,routeModule:()=>d,serverHooks:()=>g,workAsyncStorage:()=>E,workUnitAsyncStorage:()=>S});var n={};t.r(n),t.d(n,{POST:()=>l});var s=t(1271),o=t(1232),a=t(8079),i=t(1238),u=t(1883),c=t(1525),p=t(4291);async function l(e){try{let r=e.headers.get("authorization");if(!r)return i.NextResponse.json({error:"Unauthorized"},{status:401});let t=(0,c.createClient)((0,p.getSupabaseUrl)(),(0,p.getSupabaseAnonKey)(),{global:{headers:{Authorization:r}}}),{data:{user:n}}=await t.auth.getUser();if(!n)return i.NextResponse.json({error:"Unauthorized"},{status:401});let{action:s,accountState:o,recentTrades:a,sessionData:l,product:d}=await e.json();if(!s||!o||!d)return i.NextResponse.json({error:"Missing required fields"},{status:400});let E=await (0,u.E)({userId:n.id,action:s,accountState:o,recentTrades:a||[],sessionData:l||{startTime:Date.now(),errors:0,totalActions:0},product:d});return i.NextResponse.json(E,{status:200})}catch(e){return console.error("Council governance error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/council/governance/route",pathname:"/api/council/governance",filename:"route",bundlePath:"app/api/council/governance/route"},resolvedPagePath:"C:\\Projects\\Synqra\\apps\\synqra-mvp\\app\\api\\council\\governance\\route.ts",nextConfigOutput:"standalone",userland:n}),{workAsyncStorage:E,workUnitAsyncStorage:S,serverHooks:g}=d;function A(){return(0,a.patchFetch)({workAsyncStorage:E,workUnitAsyncStorage:S})}},7032:()=>{},408:()=>{},1883:(e,r,t)=>{"use strict";async function n(e){return{decision:"PROCEED",confidence:.5,reasoning:"Council consultation pending implementation.",recommendations:[]}}async function s(e){console.log("Outcome recording pending implementation:",e.actionId)}t.d(r,{E:()=>n,U:()=>s})},4291:(e,r,t)=>{"use strict";t.d(r,{F:()=>i,getSupabaseAnonKey:()=>a,getSupabaseUrl:()=>o});let n=["SUPABASE_SERVICE_KEY","SUPABASE_SERVICE_ROLE"];function s(e,r){if(!e||""===e.trim())throw Error(`[Supabase Env] ${r} is missing or empty`);return e}function o(){let e=s(process.env.SUPABASE_URL,"SUPABASE_URL");return function(e,r){try{let t=new URL(e);if("http:"!==t.protocol&&"https:"!==t.protocol)throw Error(`[Supabase Env] ${r} must start with http:// or https://`)}catch(e){throw Error(`[Supabase Env] ${r} is invalid: ${e instanceof Error?e.message:"Unknown URL error"}`)}}(e,"SUPABASE_URL"),e}function a(){return s(process.env.SUPABASE_ANON_KEY,"SUPABASE_ANON_KEY")}function i(){let e=process.env.SUPABASE_SERVICE_ROLE_KEY;if(e&&""!==e.trim())return e;for(let e of n){let r=process.env[e];if(r&&""!==r.trim())return console.warn(`[Supabase Env] Falling back to ${e}. Set SUPABASE_SERVICE_ROLE_KEY and restart.`),r}throw Error("[Supabase Env] SUPABASE_SERVICE_ROLE_KEY is missing or empty")}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[6207,8048,1525],()=>t(5385));module.exports=n})();