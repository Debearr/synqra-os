# ============================================================
# SUPABASE CONFIGURATION
# ============================================================
# Get these from your Supabase project settings:
# https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api

# Canonical app vars (Vercel + Next.js runtime)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co

# Your Supabase anonymous/public key (safe to expose in client-side code)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Your Supabase service role key (⚠️ NEVER expose in client-side code!)
# Required for: Waitlist API, admin operations
# This key bypasses Row Level Security - keep it secret!
SUPABASE_SERVICE_ROLE=your-service-role-key-here

# Server fallback aliases (optional, keep in parity with canonical values)
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here

# ============================================================
# PILOT ACCESS CONTROL (Block 6A)
# ============================================================
# Comma-separated allowlist entries; non-allowlisted users are denied.
PILOT_ALLOWLIST_EMAILS=pilot1@example.com,pilot2@example.com,pilot3@example.com,pilot4@example.com,pilot5@example.com
PILOT_ALLOWLIST_USER_IDS=
# Must be 5-10 inclusive.
PILOT_ALLOWLIST_MAX_USERS=10

# ============================================================
# BILLING (Stripe - Block 6B)
# ============================================================
STRIPE_SECRET_KEY=sk_test_your_secret_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
STRIPE_PRO_PRICE_ID=price_your_pro_price_id_here

# ============================================================
# ANTHROPIC API (Existing)
# ============================================================
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# ============================================================
# CONTENT FLYWHEEL (Optional)
# ============================================================
# Set to true to enable file logging (requires writable filesystem)
# Default: false (uses console.log only)
ENABLE_FILE_LOGGING=false

# ============================================================
# SETUP INSTRUCTIONS
# ============================================================
# 1. Copy this file to .env.local:
#    cp .env.local.example .env.local
#
# 2. Create a free Supabase project:
#    https://supabase.com/dashboard
#
# 3. Run the SQL schema:
#    Open Supabase SQL Editor and paste contents of:
#    /infra/docs/sop/supabase-schema.sql
#
# 4. Get your Supabase credentials:
#    - Go to Project Settings > API
#    - Copy the Project URL and anon/public key
#    - Paste them above
#
# 5. Restart your dev server:
#    npm run dev:3004
SAFEGUARDS_ENABLED=true
SAFEGUARDS_GLOBAL_KILL=false
SAFEGUARDS_MAX_DAILY_COST_USD=7
SAFEGUARDS_MAX_MONTHLY_COST_USD=200
SAFEGUARDS_MAX_REQ_COST_USD=0.05
SAFEGUARDS_LOG_LEVEL=info
SAFEGUARDS_FAIL_CLOSED=true
