# üèõÔ∏è N√òID Labs ‚Äì Standard Nixpacks Configuration
# Version: 1.0.0
# Last Updated: 2025-11-17
# 
# This is the STANDARD deployment configuration for all N√òID Labs Next.js apps.
# Use this template for Railway deployments.
#
# ‚ö†Ô∏è DO NOT use Dockerfile or railway.json ‚Äì Nixpacks is the standard.

# ============================================================================
# SETUP PHASE ‚Äì Install Node.js 20
# ============================================================================
[phases.setup]
nixPkgs = ['nodejs_20']

# ============================================================================
# INSTALL PHASE ‚Äì Install dependencies
# ============================================================================
[phases.install]
cmds = [
    'npm ci --prefer-offline --no-audit'
]

# ============================================================================
# BUILD PHASE ‚Äì Build Next.js production bundle
# ============================================================================
[phases.build]
cmds = [
    'npm run build'
]

# ============================================================================
# START PHASE ‚Äì Start production server
# ============================================================================
[start]
cmd = 'npm start'

# ============================================================================
# NOTES
# ============================================================================
#
# 1. PORT BINDING
#    Ensure package.json includes:
#    "start": "next start -p ${PORT:-3000} --hostname 0.0.0.0"
#
# 2. ENVIRONMENT VARIABLES (Railway)
#    Required:
#    - RAILWAY_DOMAIN=<your-domain.com>
#    - APP_DOMAIN=<your-domain.com>
#    - NEXT_PUBLIC_APP_DOMAIN=<your-domain.com>
#    - SUPABASE_URL=<your-supabase-url>
#    - SUPABASE_SERVICE_ROLE=<your-service-role-key>
#    - SUPABASE_ANON_KEY=<your-anon-key>
#
# 3. MONOREPO CONFIGURATION (Railway)
#    Set "Root Directory" to the app folder:
#    - apps/synqra-mvp (for Synqra)
#    - apps/noid (for N√òID)
#    - apps/aurafx (for AuraFX)
#    - apps/luxgrid (for LuxGrid)
#    - apps/ny7coffee (for NY7 Coffee)
#
# 4. BUILDER CONFIGURATION (Railway)
#    - Builder: Nixpacks (NOT Docker)
#    - Node Version: 20.x (detected automatically)
#
# 5. DEPLOYMENT VERIFICATION
#    Before deploying, verify:
#    ‚úÖ Node 20 is set
#    ‚úÖ PORT binding is correct
#    ‚úÖ No Dockerfile present
#    ‚úÖ Root directory matches app
#    ‚úÖ Domain matches .cursor/domain-map.json
#
# 6. TROUBLESHOOTING
#    If build fails:
#    - Check Railway logs for errors
#    - Verify all environment variables are set
#    - Ensure Root Directory is correct
#    - Confirm package.json scripts are valid
#    - Check DEPLOYMENT_GUARDRAILS.md for common issues
#
# ============================================================================
# N√òID Labs ‚Äì Built to Last
# ============================================================================
