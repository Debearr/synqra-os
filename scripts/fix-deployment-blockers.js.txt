// fix-deployment-blockers.js
// De Bear ‚Äì Synqra Deployment Fix Script

import fs from "fs";
import path from "path";

console.log("\nüõ†Ô∏è  Running Synqra Deployment Blocker Fix...\n");

const packagePath = path.join(process.cwd(), "package.json");

if (!fs.existsSync(packagePath)) {
  console.error("‚ùå ERROR: package.json not found. Are you in the root project folder?");
  process.exit(1);
}

const pkg = JSON.parse(fs.readFileSync(packagePath, "utf8"));

pkg.type = "module";

if (!pkg.scripts) pkg.scripts = {};

pkg.scripts["fix:deployment-blockers"] = "node scripts/fix-deployment-blockers.js";

fs.writeFileSync(packagePath, JSON.stringify(pkg, null, 2));

console.log("‚úÖ Successfully updated package.json");
console.log("‚úÖ Deployment blockers fixed");
console.log("\nüéâ You're good to continue, De Bear!\n");
