(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3649],{6218:(e,t,i)=>{Promise.resolve().then(i.bind(i,4127))},4127:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var s=i(6481),r=i(9829);let n=["Whisper","Statement","Crescendo"],a={Whisper:{maxWords:120},Statement:{maxWords:100},Crescendo:{maxWords:75}},c=["beautiful","luxury","amazing","stunning","exclusive","magic","generate","optimize"];function d(e){let{options:t,selectedEnergy:i,onSelect:r}=e;return(0,s.jsxs)("section",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm leading-copy tracking-[0.08em] text-ds-text-secondary",children:"Step 3"}),(0,s.jsx)("h2",{className:"text-2xl font-medium leading-compact",children:"Select energy"})]}),(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>{let t=i===e;return(0,s.jsx)("button",{type:"button",onClick:()=>r(e),className:"w-full border p-6 text-left ".concat(t?"border-ds-gold bg-ds-surface text-ds-text-primary":"border-ds-text-secondary/40 bg-ds-surface text-ds-text-primary"),children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-base font-medium leading-compact",children:e}),(0,s.jsxs)("p",{className:"text-sm leading-copy text-ds-text-secondary",children:["Max words: ",a[e].maxWords]})]})},e)})})]})}function o(e){let{options:t,selectedFormat:i,onSelect:r}=e;return(0,s.jsxs)("section",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm leading-copy tracking-[0.08em] text-ds-text-secondary",children:"Step 2"}),(0,s.jsx)("h2",{className:"text-2xl font-medium leading-compact",children:"Select format"})]}),(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>{let t=i===e;return(0,s.jsx)("button",{type:"button",onClick:()=>r(e),className:"w-full border p-6 text-left text-sm font-medium leading-copy ".concat(t?"border-ds-gold bg-ds-surface text-ds-text-primary":"border-ds-text-secondary/40 bg-ds-surface text-ds-text-primary"),children:e},e)})})]})}function l(e){let{options:t,selectedIntent:i,onSelect:r}=e;return(0,s.jsxs)("section",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm leading-copy tracking-[0.08em] text-ds-text-secondary",children:"Step 1"}),(0,s.jsx)("h2",{className:"text-2xl font-medium leading-compact",children:"Select intent"})]}),(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>{let t=i===e;return(0,s.jsx)("button",{type:"button",onClick:()=>r(e),className:"w-full border p-6 text-left text-sm font-medium leading-copy ".concat(t?"border-ds-gold bg-ds-surface text-ds-text-primary":"border-ds-text-secondary/40 bg-ds-surface text-ds-text-primary"),children:e},e)})})]})}function p(e){let{intent:t,format:i,energy:r,output:n,errors:a,confirmed:c,onConfirm:d,onEdit:o}=e;return(0,s.jsxs)("section",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm leading-copy tracking-[0.08em] text-ds-text-secondary",children:"Step 4"}),(0,s.jsx)("h2",{className:"text-2xl font-medium leading-compact",children:"Preview"})]}),(0,s.jsxs)("div",{className:"space-y-4 border border-ds-text-secondary/40 bg-ds-surface p-6",children:[(0,s.jsxs)("p",{className:"text-sm leading-copy text-ds-text-secondary",children:["Intent: ",t," | Format: ",i," | Energy: ",r]}),(0,s.jsx)("pre",{className:"whitespace-pre-wrap text-sm leading-copy text-ds-text-primary",children:n}),a.length>0?(0,s.jsx)("div",{className:"space-y-2",children:a.map(e=>(0,s.jsx)("p",{className:"text-sm leading-copy text-ds-gold",children:e},e))}):null]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("button",{type:"button",onClick:d,className:"w-full bg-ds-gold px-4 py-2 text-sm font-medium leading-copy text-ds-bg",children:"Confirm"}),(0,s.jsx)("button",{type:"button",onClick:o,className:"w-full border border-ds-text-secondary/40 bg-ds-surface px-4 py-2 text-sm font-medium leading-copy text-ds-text-primary",children:"Edit"})]}),c?(0,s.jsx)("p",{className:"text-sm leading-copy text-ds-text-secondary",children:"Saved to local log."}):null]})}let m=["Reservation Lead","Partner Assurance","Reveal Close"],u=["Instagram story series","Client Proposal","Itinerary Reveal"],_={"Reservation Lead":{"Instagram story series":{whisper:"{{destination}} {{suite_type}} opens {{timing_window}}.[PANEL]{{partner_status}} confirms {{experience_marker}}.[PANEL]{{access_type}} {{service_tier}} set for {{trip_duration}} {{timing_qualifier}}.[PANEL]Hold by {{cta_deadline}}.",statement:"{{destination}} {{suite_type}} available {{timing_window}}.[PANEL]{{partner_status}} confirms {{experience_marker}}.[PANEL]{{access_type}} {{service_tier}} for {{trip_duration}} {{timing_qualifier}}.[PANEL]Reserve before {{cta_deadline}}.",crescendo:"{{destination}} {{suite_type}} now set {{timing_window}}.[PANEL]{{partner_status}} confirms {{experience_marker}}.[PANEL]{{access_type}} {{service_tier}} {{trip_duration}} {{timing_qualifier}}.[PANEL]Lock by {{cta_deadline}}."},"Client Proposal":{whisper:"{{destination}} {{suite_type}} is aligned for {{timing_window}} with {{partner_status}} and {{experience_marker}}. {{access_type}} under {{service_tier}} supports a {{trip_duration}} plan with {{timing_qualifier}} pacing. Confirmation window closes {{cta_deadline}}.",statement:"{{destination}} {{suite_type}} is positioned for {{timing_window}}. {{partner_status}} and {{experience_marker}} are confirmed. {{access_type}} with {{service_tier}} secures {{trip_duration}} with {{timing_qualifier}} sequencing. Decision window: {{cta_deadline}}.",crescendo:"{{destination}} {{suite_type}} is ready in {{timing_window}}. {{partner_status}} confirms {{experience_marker}}. {{access_type}} via {{service_tier}} supports {{trip_duration}} and {{timing_qualifier}} delivery. Confirm by {{cta_deadline}}."},"Itinerary Reveal":{whisper:"{{destination}} {{suite_type}} schedule begins {{timing_window}} with {{partner_status}} and {{experience_marker}} verified. {{access_type}} and {{service_tier}} frame {{trip_duration}} with {{timing_qualifier}} transitions. Final hold remains open until {{cta_deadline}}.",statement:"{{destination}} {{suite_type}} itinerary starts {{timing_window}}. {{partner_status}} confirms {{experience_marker}}. {{access_type}} under {{service_tier}} structures {{trip_duration}} with {{timing_qualifier}} sequencing. Secure before {{cta_deadline}}.",crescendo:"{{destination}} {{suite_type}} itinerary is fixed {{timing_window}}. {{partner_status}} confirms {{experience_marker}}. {{access_type}} plus {{service_tier}} carries {{trip_duration}} with {{timing_qualifier}} pace. Confirm by {{cta_deadline}}."}},"Partner Assurance":{"Instagram story series":{whisper:"{{destination}} {{suite_type}} holds {{timing_window}}.[PANEL]{{partner_status}} reflects {{experience_marker}}.[PANEL]{{access_type}} {{service_tier}} supports {{trip_duration}} {{timing_qualifier}}.[PANEL]Confirm before {{cta_deadline}}.",statement:"{{destination}} {{suite_type}} remains set {{timing_window}}.[PANEL]{{partner_status}} confirms {{experience_marker}}.[PANEL]{{access_type}} {{service_tier}} sustains {{trip_duration}} {{timing_qualifier}}.[PANEL]Respond by {{cta_deadline}}.",crescendo:"{{destination}} {{suite_type}} is secured {{timing_window}}.[PANEL]{{partner_status}} confirms {{experience_marker}}.[PANEL]{{access_type}} {{service_tier}} holds {{trip_duration}} {{timing_qualifier}}.[PANEL]Complete by {{cta_deadline}}."},"Client Proposal":{whisper:"{{destination}} {{suite_type}} remains protected across {{timing_window}}. {{partner_status}} and {{experience_marker}} verify continuity. {{access_type}} with {{service_tier}} maintains {{trip_duration}} and {{timing_qualifier}} alignment. Final confirmation requested by {{cta_deadline}}.",statement:"{{destination}} {{suite_type}} is stable for {{timing_window}} with {{partner_status}} and {{experience_marker}} verified. {{access_type}} under {{service_tier}} keeps {{trip_duration}} on {{timing_qualifier}} cadence. Confirmation due {{cta_deadline}}.",crescendo:"{{destination}} {{suite_type}} is fully secured for {{timing_window}}. {{partner_status}} validates {{experience_marker}}. {{access_type}} plus {{service_tier}} keeps {{trip_duration}} in {{timing_qualifier}} sequence. Approve by {{cta_deadline}}."},"Itinerary Reveal":{whisper:"{{destination}} {{suite_type}} itinerary remains intact for {{timing_window}}. {{partner_status}} confirms {{experience_marker}}. {{access_type}} with {{service_tier}} supports {{trip_duration}} under {{timing_qualifier}} pacing. Close the hold by {{cta_deadline}}.",statement:"{{destination}} {{suite_type}} itinerary is protected through {{timing_window}}. {{partner_status}} confirms {{experience_marker}}. {{access_type}} and {{service_tier}} sustain {{trip_duration}} with {{timing_qualifier}} movement. Approval by {{cta_deadline}}.",crescendo:"{{destination}} {{suite_type}} itinerary is confirmed for {{timing_window}}. {{partner_status}} secures {{experience_marker}}. {{access_type}} via {{service_tier}} drives {{trip_duration}} through {{timing_qualifier}} sequence. Finalize by {{cta_deadline}}."}},"Reveal Close":{"Instagram story series":{whisper:"{{destination}} {{suite_type}} reveal lands {{timing_window}}.[PANEL]{{partner_status}} signals {{experience_marker}}.[PANEL]{{access_type}} {{service_tier}} frames {{trip_duration}} {{timing_qualifier}}.[PANEL]Reveal closes {{cta_deadline}}.",statement:"{{destination}} {{suite_type}} reveal activates {{timing_window}}.[PANEL]{{partner_status}} confirms {{experience_marker}}.[PANEL]{{access_type}} {{service_tier}} carries {{trip_duration}} {{timing_qualifier}}.[PANEL]Deadline {{cta_deadline}}.",crescendo:"{{destination}} {{suite_type}} reveal is live {{timing_window}}.[PANEL]{{partner_status}} confirms {{experience_marker}}.[PANEL]{{access_type}} {{service_tier}} drives {{trip_duration}} {{timing_qualifier}}.[PANEL]Lock by {{cta_deadline}}."},"Client Proposal":{whisper:"{{destination}} {{suite_type}} reveal is staged for {{timing_window}}. {{partner_status}} supports {{experience_marker}}. {{access_type}} and {{service_tier}} define {{trip_duration}} with {{timing_qualifier}} progression. Acceptance window ends {{cta_deadline}}.",statement:"{{destination}} {{suite_type}} reveal is positioned at {{timing_window}} with {{partner_status}} and {{experience_marker}} aligned. {{access_type}} under {{service_tier}} frames {{trip_duration}} with {{timing_qualifier}} order. Confirm by {{cta_deadline}}.",crescendo:"{{destination}} {{suite_type}} reveal is set for {{timing_window}}. {{partner_status}} confirms {{experience_marker}}. {{access_type}} plus {{service_tier}} presents {{trip_duration}} in {{timing_qualifier}} order. Approve before {{cta_deadline}}."},"Itinerary Reveal":{whisper:"{{destination}} {{suite_type}} reveal itinerary opens {{timing_window}}. {{partner_status}} confirms {{experience_marker}}. {{access_type}} with {{service_tier}} supports {{trip_duration}} using {{timing_qualifier}} timing. Final hold remains until {{cta_deadline}}.",statement:"{{destination}} {{suite_type}} reveal itinerary begins {{timing_window}} with {{partner_status}} and {{experience_marker}} confirmed. {{access_type}} under {{service_tier}} structures {{trip_duration}} with {{timing_qualifier}} pacing. Confirm by {{cta_deadline}}.",crescendo:"{{destination}} {{suite_type}} reveal itinerary is active {{timing_window}}. {{partner_status}} confirms {{experience_marker}}. {{access_type}} and {{service_tier}} execute {{trip_duration}} through {{timing_qualifier}} cadence. Finalize by {{cta_deadline}}."}}},y=RegExp("\\p{Extended_Pictographic}","u");function x(e){let t=e.match(/[A-Za-z0-9]+(?:['-][A-Za-z0-9]+)*/g);return t?t.length:0}class g extends Error{constructor(e,t,i){super(t),this.name="JourneyAssemblyError",this.code=e,this.details=i}}let f={Whisper:"whisper",Statement:"statement",Crescendo:"crescendo"},h="journey_v1_logs",w={destination:"Amalfi",suite_type:"SignatureSuite",timing_window:"JuneWindow",partner_status:"PartnerConfirmed",experience_marker:"SeaTransferSet",cta_deadline:"May30",access_type:"PriorityAccess",service_tier:"TierOne",timing_qualifier:"Early",trip_duration:"6Nights"};function v(){let[e,t]=(0,r.useState)(1),[i,v]=(0,r.useState)(null),[N,b]=(0,r.useState)(null),[j,E]=(0,r.useState)(null),[k,A]=(0,r.useState)(""),[P,L]=(0,r.useState)([]),[S,q]=(0,r.useState)(!1),C=(0,r.useMemo)(()=>[1,2,3,4],[]);return(0,s.jsx)("main",{className:"min-h-screen bg-ds-bg text-ds-text-primary",children:(0,s.jsxs)("div",{className:"mx-auto w-full max-w-journey space-y-6 px-6 py-12",children:[(0,s.jsxs)("header",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm leading-copy text-ds-text-secondary",children:"Journey V1"}),(0,s.jsx)("h1",{className:"text-2xl font-medium leading-compact",children:"Deterministic flow"})]}),(0,s.jsx)("div",{className:"flex items-center gap-2","aria-hidden":!0,children:C.map(t=>(0,s.jsx)("span",{className:"block h-2 w-2 ".concat(t<=e?"bg-ds-gold":"bg-ds-text-secondary/40")},t))}),(0,s.jsxs)("div",{children:[1===e?(0,s.jsx)(l,{options:m,selectedIntent:i,onSelect:e=>{v(e),q(!1),t(2)}}):null,2===e?(0,s.jsx)(o,{options:u,selectedFormat:N,onSelect:e=>{b(e),q(!1),t(3)}}):null,3===e?(0,s.jsx)(d,{options:n,selectedEnergy:j,onSelect:e=>{if(i&&N){E(e),q(!1);try{let t=function(e){var t,i,s;let r;let{intent:n,format:d,energy:o,fields:l}=e,p=f[o],m=null===(i=_[n])||void 0===i?void 0:null===(t=i[d])||void 0===t?void 0:t[p];if(!m)throw new g("TEMPLATE_NOT_FOUND","Template mapping does not exist for the selected inputs.",{intent:n,format:d,variant:p});let u=(r=m,Object.entries(l).forEach(e=>{let[t,i]=e;r=r.split("{{".concat(t,"}}")).join(i.trim())}),r),h=null!==(s=u.match(/{{[^}]+}}/g))&&void 0!==s?s:[];if(h.length>0)throw new g("MISSING_SLOTS","Template assembly left unresolved slots.",{unresolvedSlots:h,intent:n,format:d,variant:p});let w=function(e,t,i){let s=[],r=x(e),n=a[t].maxWords;r>n&&s.push("Word count exceeds ".concat(n," for ").concat(t,". Found ").concat(r,"."));let d=c.filter(t=>RegExp("\\b".concat(t,"\\b"),"i").test(e));if(d.length>0&&s.push("Banned words detected: ".concat(d.join(", "),".")),e.includes("!")&&s.push("Exclamation marks are not allowed."),y.test(e)&&s.push("Emoji are not allowed."),"Instagram story series"===i){let t=e.split("[PANEL]").map(e=>e.trim()).filter(Boolean);t.length>4&&s.push("Instagram story series supports at most 4 panels. Found ".concat(t.length,".")),t.forEach((e,t)=>{let i=x(e);i>12&&s.push("Panel ".concat(t+1," exceeds 12 words. Found ").concat(i,"."))})}return{valid:0===s.length,errors:s}}(u,o,d);if(!w.valid)throw new g("VALIDATION_FAILED","Output failed deterministic validation.",{intent:n,format:d,energy:o,errors:w.errors});return u}({intent:i,format:N,energy:e,fields:w});A(t),L([])}catch(e){if(e instanceof g&&"VALIDATION_FAILED"===e.code){let t=Array.isArray(e.details.errors)?e.details.errors:["Validation failed."];A(""),L(t)}else e instanceof g?(A(""),L([e.message])):(A(""),L(["Unknown assembly failure."]))}t(4)}}}):null,4===e&&i&&N&&j?(0,s.jsx)(p,{intent:i,format:N,energy:j,output:k,errors:P,confirmed:S,onConfirm:()=>{if(!i||!N||!j||!k||P.length>0)return;let e={intent:i,format:N,energy:j,generatedText:k,timestamp:new Date().toISOString()},t=localStorage.getItem(h),s=t?JSON.parse(t):[];s.push(e),localStorage.setItem(h,JSON.stringify(s)),q(!0)},onEdit:()=>{if(P.length>0){t(function(e){let t=e.join(" ").toLowerCase();return t.includes("panel")?2:t.includes("word count")||t.includes("banned")||t.includes("emoji")||t.includes("exclamation")?3:1}(P));return}t(3)}}):null]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9275,8163,7358],()=>t(6218)),_N_E=e.O()}]);