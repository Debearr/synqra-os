name: NÃ˜ID Auto-Manifest Generator + GitHub Sync
on:
  file_change:
    path: deploy/docs/Drop-Ready-Manifest_v*.md

jobs:
  manifest:
    runs-on: local

    steps:
      - uses: cursor/checkout@v1

      - name: ğŸ”§ Build companion files
        run: |
          cursor convert deploy/docs/Drop-Ready-Manifest_v2.1.md \
            --to pdf,json,yaml \
            --output deploy/docs/

      - name: ğŸ·ï¸ Tag automated release
        run: |
          cursor tag create v2.1-auto \
            --message "Automated NÃ˜ID manifest export"

      - name: ğŸ”’ Verify manifest integrity
        run: |
          cursor hash verify deploy/docs/Drop-Ready-Manifest_v2.1.md

      - name: ğŸ¤– Configure NÃ˜ID-AutoBot Git identity
        run: |
          git config --global user.email "noid@system.ai"
          git config --global user.name "NÃ˜ID-AutoBot"

      - name: ğŸ’¾ Commit and push to GitHub
        run: |
          git add deploy/docs/Drop-Ready-Manifest_v2.1.*
          git commit -m "auto: manifest v2.1 build + sync by NÃ˜ID-AutoBot"
          git push origin main

      - name: âœ… Confirmation log
        run: |
          echo "ğŸš€ Manifest v2.1 successfully generated, verified, and synced to GitHub via NÃ˜ID-AutoBot."

