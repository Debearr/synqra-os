name: "NÃ˜ID Smart Auto Init"
trigger: "auto-init"
description: "Auto-detects and initializes NÃ˜ID projects (Synqra or AuraFX) directly inside Cursor without needing local PowerShell."
actions:
  - run: |
      echo "ğŸ§­ Detecting environment..."
      if [ "$(uname -s)" = "Linux" ]; then
        echo "ğŸŒ Running in Cursor Cloud VM"
        ROOT="/workspace"
      else
        echo "ğŸ’» Running locally on Windows"
        ROOT="C:/Users/De Bear/OneDrive"
      fi

      # Prefer project at the ROOT itself if present, else look for known subfolders
      if [ -f "$ROOT/package.json" ]; then
        cd "$ROOT"
        echo "ğŸ“¦ Project detected at workspace root"
      elif [ -f "$ROOT/Synqra/package.json" ]; then
        cd "$ROOT/Synqra"
        echo "ğŸ“¦ Synqra detected"
      elif [ -f "$ROOT/AuraFX/package.json" ]; then
        cd "$ROOT/AuraFX"
        echo "ğŸ“¦ AuraFX detected"
      else
        echo "âŒ No known project found."
        exit 1
      fi

      npm install
      npm run init-config || echo "âš ï¸ init-config script not found â€” skipping."
  - notify: "âœ… NÃ˜ID Smart Auto Init completed successfully!"